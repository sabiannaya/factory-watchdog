import{d as b,c as o,a as r,z as F,b as v,q as G,L as w,t as h,o as l,g as k,f as V,F as S,i as N,n as I,K as A,x as $,m as B,e as q,u as _}from"./app-D4NX6RtZ.js";const D={class:"space-y-4"},E={class:"grid gap-2"},j={key:0,class:"text-sm text-red-500"},J={class:"grid gap-2"},L={key:0,class:"text-sm text-red-500"},ie=b({__name:"MachineGroupFormFields",props:{form:{}},setup(e){return(s,t)=>(l(),o("div",D,[t[4]||(t[4]=r("h3",{class:"text-sm font-medium"},"Basic Information",-1)),r("div",E,[t[2]||(t[2]=r("label",{class:"text-sm font-medium"},[G("Name "),r("span",{class:"text-red-500"},"*")],-1)),F(r("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.name=n),type:"text",class:"input",required:""},null,512),[[w,e.form.name]]),e.form.errors.name?(l(),o("div",j,h(e.form.errors.name),1)):v("",!0)]),r("div",J,[t[3]||(t[3]=r("label",{class:"text-sm font-medium"},"Description",-1)),F(r("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.description=n),class:"input min-h-[80px]"},null,512),[[w,e.form.description]]),e.form.errors.description?(l(),o("div",L,h(e.form.errors.description),1)):v("",!0)])]))}}),M=[{value:"qty_normal",label:"Quantity Normal"},{value:"qty_reject",label:"Quantity Reject"},{value:"grades",label:"Grades (Multiple)"},{value:"grade",label:"Grade (Single)"},{value:"ukuran",label:"Size/Dimension (Ukuran)"},{value:"keterangan",label:"Description (Keterangan)"}],C=["qty_normal","qty_reject"];function T(e){const s=(e||[]).filter(t=>t!=="qty");return s.includes("qty_normal")||s.push("qty_normal"),s.includes("qty_reject")||s.push("qty_reject"),s}function P(e){const s=k(T(e?.fields||C)),t=k(e?.grade_types||[]),n=k(""),d=V(()=>s.value.includes("grades")||s.value.includes("grade"));function c(u){const i=s.value.indexOf(u);i>-1?s.value.splice(i,1):(u==="grade"&&s.value.includes("grades")?s.value.splice(s.value.indexOf("grades"),1):u==="grades"&&s.value.includes("grade")&&s.value.splice(s.value.indexOf("grade"),1),s.value.push(u))}function g(){n.value.trim()&&!t.value.includes(n.value.trim())&&(t.value.push(n.value.trim()),n.value="")}function m(u){const i=t.value.indexOf(u);i>-1&&t.value.splice(i,1)}function p(u){const i=T(u);return i.includes("qty_normal")&&i.includes("qty_reject")?"normal_reject":i.includes("grades")?"grades":i.includes("grade")&&i.includes("qty_normal")?"grade_qty_normal":i.includes("qty_normal")&&i.includes("ukuran")?"qty_normal_ukuran":"custom"}function f(){return{type:p(s.value),fields:[...s.value],grade_types:d.value?[...t.value]:[]}}function x(u){s.value=T(u?.fields||C),t.value=u?.grade_types||[],n.value=""}return{selectedFields:s,gradeTypes:t,newGradeType:n,hasGrades:d,toggleField:c,addGradeType:g,removeGradeType:m,determineType:p,buildInputConfig:f,reset:x}}const z={class:"space-y-2"},U={class:"grid grid-cols-2 gap-2"},K=["checked","onChange"],R={class:"text-sm"},Q=b({__name:"FieldSelector",props:{selectedFields:{},fields:{default:()=>M}},emits:["update:selectedFields","fieldToggled"],setup(e,{emit:s}){const t=e,n=s;function d(c){n("fieldToggled",c)}return(c,g)=>(l(),o("div",z,[g[0]||(g[0]=r("label",{class:"text-sm font-medium"},"Available Fields",-1)),r("div",U,[(l(!0),o(S,null,N(t.fields,m=>(l(),o("label",{key:m.value,class:I(["flex items-center gap-2 p-3 rounded-md border border-input bg-background dark:bg-card cursor-pointer transition-colors focus-within:ring-2 focus-within:ring-primary/20",e.selectedFields.includes(m.value)?"border-primary bg-primary/5 dark:bg-primary/10":"hover:bg-muted/10 dark:hover:bg-muted/20"])},[r("input",{type:"checkbox",checked:e.selectedFields.includes(m.value),onChange:p=>d(m.value),class:"w-4 h-4 rounded border-input accent-primary bg-white dark:bg-card"},null,40,K),r("span",R,h(m.label),1)],2))),128))])]))}}),H={class:"space-y-3 p-4 rounded-md border bg-muted/20"},W={class:"flex gap-2"},X={key:0,class:"flex flex-wrap gap-2"},Y=["onClick"],Z=b({__name:"GradeTypesManager",props:{gradeTypes:{}},emits:["add","remove"],setup(e,{emit:s}){const t=e,n=s,d=k("");function c(){d.value.trim()&&!t.gradeTypes.includes(d.value.trim())&&(n("add",d.value.trim()),d.value="")}function g(m){n("remove",m)}return(m,p)=>(l(),o("div",H,[p[1]||(p[1]=r("label",{class:"text-sm font-medium"},"Grade Types",-1)),p[2]||(p[2]=r("p",{class:"text-xs text-muted-foreground"},"Define the types of grades (e.g., Faceback, OPC, PPC)",-1)),r("div",W,[F(r("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>d.value=f),type:"text",placeholder:"Add grade type...",class:"input flex-1",onKeyup:A(c,["enter"])},null,544),[[w,d.value]]),r("button",{type:"button",onClick:c,class:"hover:cursor-pointer btn"}," Add ")]),e.gradeTypes.length>0?(l(),o("div",X,[(l(!0),o(S,null,N(e.gradeTypes,f=>(l(),o("span",{key:f,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-primary/10 text-primary text-sm"},[G(h(f)+" ",1),r("button",{type:"button",onClick:x=>g(f),class:"hover:text-primary/70"}," Ã— ",8,Y)]))),128))])):v("",!0)]))}}),ee={class:"space-y-2 p-4 rounded-md border bg-muted/10"},te={key:0,class:"text-sm font-medium"},se={class:"text-xs overflow-auto"},re=b({__name:"InputConfigPreview",props:{config:{},showTitle:{type:Boolean,default:!0}},setup(e){return(s,t)=>(l(),o("div",ee,[e.showTitle?(l(),o("h4",te,"Configuration Preview")):v("",!0),r("pre",se,h(JSON.stringify(e.config,null,2)),1)]))}}),ne={class:"space-y-4"},ae={key:1,class:"text-sm text-red-500"},de=b({__name:"InputConfigEditor",props:{modelValue:{},showPreview:{type:Boolean,default:!0},showErrors:{type:Boolean,default:!0},errorMessage:{default:""}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,n=s,{selectedFields:d,gradeTypes:c,hasGrades:g,toggleField:m,removeGradeType:p,buildInputConfig:f,reset:x}=P(t.modelValue);x(t.modelValue),$([d,c],()=>{const a=f();try{const y=JSON.parse(JSON.stringify(t.modelValue||{}));JSON.stringify(a)!==JSON.stringify(y)&&n("update:modelValue",a)}catch{n("update:modelValue",a)}},{deep:!0}),$(()=>t.modelValue,a=>{try{const y=f();JSON.stringify(a||{})!==JSON.stringify(y)&&a&&x(a)}catch{a&&x(a)}},{deep:!0});function u(a){m(a)}function i(a){a&&!c.value.includes(a)&&c.value.push(a)}function O(a){p(a)}return(a,y)=>(l(),o("div",ne,[y[0]||(y[0]=r("div",null,[r("h3",{class:"text-sm font-medium"},"Input Configuration"),r("p",{class:"text-sm text-muted-foreground"},"Select which input fields this machine group will use")],-1)),B(Q,{"selected-fields":_(d),onFieldToggled:u},null,8,["selected-fields"]),_(g)?(l(),q(Z,{key:0,"grade-types":_(c),onAdd:i,onRemove:O},null,8,["grade-types"])):v("",!0),e.showErrors&&e.errorMessage?(l(),o("div",ae,h(e.errorMessage),1)):v("",!0),e.showPreview?(l(),q(re,{key:2,config:_(f)()},null,8,["config"])):v("",!0)]))}});export{ie as _,de as a};
