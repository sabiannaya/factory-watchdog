import{d as b,c as d,a as s,H as T,b as v,q as C,I as w,t as h,o as i,r as _,e as S,F as G,h as q,n as V,D as I,w as F,k as O,p as $,u as k}from"./app-ByVm3FOg.js";const B={class:"space-y-4"},A={class:"grid gap-2"},D={key:0,class:"text-sm text-red-500"},J={class:"grid gap-2"},M={key:0,class:"text-sm text-red-500"},ae=b({__name:"MachineGroupFormFields",props:{form:{}},setup(e){return(l,t)=>(i(),d("div",B,[t[4]||(t[4]=s("h3",{class:"text-sm font-medium"},"Basic Information",-1)),s("div",A,[t[2]||(t[2]=s("label",{class:"text-sm font-medium"},[C("Name "),s("span",{class:"text-red-500"},"*")],-1)),T(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.name=n),type:"text",class:"input",required:""},null,512),[[w,e.form.name]]),e.form.errors.name?(i(),d("div",D,h(e.form.errors.name),1)):v("",!0)]),s("div",J,[t[3]||(t[3]=s("label",{class:"text-sm font-medium"},"Description",-1)),T(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.description=n),class:"input min-h-[80px]"},null,512),[[w,e.form.description]]),e.form.errors.description?(i(),d("div",M,h(e.form.errors.description),1)):v("",!0)])]))}}),P=[{value:"qty",label:"Quantity (Qty)"},{value:"qty_normal",label:"Quantity Normal"},{value:"qty_reject",label:"Quantity Reject"},{value:"grades",label:"Grades (Multiple)"},{value:"grade",label:"Grade (Single)"},{value:"ukuran",label:"Size/Dimension (Ukuran)"},{value:"keterangan",label:"Description (Keterangan)"}];function E(e){const l=_(e?.fields||["qty"]),t=_(e?.grade_types||[]),n=_(""),o=S(()=>l.value.includes("grades"));function u(r){const y=l.value.indexOf(r);y>-1?l.value.splice(y,1):l.value.push(r)}function g(){n.value.trim()&&!t.value.includes(n.value.trim())&&(t.value.push(n.value.trim()),n.value="")}function c(r){const y=t.value.indexOf(r);y>-1&&t.value.splice(y,1)}function m(r){return r.length===1&&r[0]==="qty"?"qty_only":r.includes("qty_normal")&&r.includes("qty_reject")?"normal_reject":r.includes("grades")?"grades":r.includes("grade")&&r.includes("qty")?"grade_qty":r.includes("qty")&&r.includes("ukuran")?"qty_ukuran":"custom"}function p(){return{type:m(l.value),fields:[...l.value],grade_types:o.value?[...t.value]:[]}}function x(r){l.value=r?.fields||["qty"],t.value=r?.grade_types||[],n.value=""}return{selectedFields:l,gradeTypes:t,newGradeType:n,hasGrades:o,toggleField:u,addGradeType:g,removeGradeType:c,determineType:m,buildInputConfig:p,reset:x}}const j={class:"space-y-2"},L={class:"grid grid-cols-2 gap-2"},Q=["checked","onChange"],U={class:"text-sm"},K=b({__name:"FieldSelector",props:{selectedFields:{},fields:{default:()=>P}},emits:["update:selectedFields","fieldToggled"],setup(e,{emit:l}){const t=e,n=l;function o(u){n("fieldToggled",u)}return(u,g)=>(i(),d("div",j,[g[0]||(g[0]=s("label",{class:"text-sm font-medium"},"Available Fields",-1)),s("div",L,[(i(!0),d(G,null,q(t.fields,c=>(i(),d("label",{key:c.value,class:V(["flex items-center gap-2 p-3 rounded-md border border-input bg-background dark:bg-card cursor-pointer transition-colors focus-within:ring-2 focus-within:ring-primary/20",e.selectedFields.includes(c.value)?"border-primary bg-primary/5 dark:bg-primary/10":"hover:bg-muted/10 dark:hover:bg-muted/20"])},[s("input",{type:"checkbox",checked:e.selectedFields.includes(c.value),onChange:m=>o(c.value),class:"w-4 h-4 rounded border-input accent-primary bg-white dark:bg-card"},null,40,Q),s("span",U,h(c.label),1)],2))),128))])]))}}),R={class:"space-y-3 p-4 rounded-md border bg-muted/20"},z={class:"flex gap-2"},H={key:0,class:"flex flex-wrap gap-2"},W=["onClick"],X=b({__name:"GradeTypesManager",props:{gradeTypes:{}},emits:["add","remove"],setup(e,{emit:l}){const t=e,n=l,o=_("");function u(){o.value.trim()&&!t.gradeTypes.includes(o.value.trim())&&(n("add",o.value.trim()),o.value="")}function g(c){n("remove",c)}return(c,m)=>(i(),d("div",R,[m[1]||(m[1]=s("label",{class:"text-sm font-medium"},"Grade Types",-1)),m[2]||(m[2]=s("p",{class:"text-xs text-muted-foreground"},"Define the types of grades (e.g., Faceback, OPC, PPC)",-1)),s("div",z,[T(s("input",{"onUpdate:modelValue":m[0]||(m[0]=p=>o.value=p),type:"text",placeholder:"Add grade type...",class:"input flex-1",onKeyup:I(u,["enter"])},null,544),[[w,o.value]]),s("button",{type:"button",onClick:u,class:"btn"}," Add ")]),e.gradeTypes.length>0?(i(),d("div",H,[(i(!0),d(G,null,q(e.gradeTypes,p=>(i(),d("span",{key:p,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-primary/10 text-primary text-sm"},[C(h(p)+" ",1),s("button",{type:"button",onClick:x=>g(p),class:"hover:text-primary/70"}," Ã— ",8,W)]))),128))])):v("",!0)]))}}),Y={class:"space-y-2 p-4 rounded-md border bg-muted/10"},Z={key:0,class:"text-sm font-medium"},ee={class:"text-xs overflow-auto"},te=b({__name:"InputConfigPreview",props:{config:{},showTitle:{type:Boolean,default:!0}},setup(e){return(l,t)=>(i(),d("div",Y,[e.showTitle?(i(),d("h4",Z,"Configuration Preview")):v("",!0),s("pre",ee,h(JSON.stringify(e.config,null,2)),1)]))}}),se={class:"space-y-4"},re={key:1,class:"text-sm text-red-500"},le=b({__name:"InputConfigEditor",props:{modelValue:{},showPreview:{type:Boolean,default:!0},showErrors:{type:Boolean,default:!0},errorMessage:{default:""}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,n=l,{selectedFields:o,gradeTypes:u,hasGrades:g,toggleField:c,removeGradeType:m,buildInputConfig:p,reset:x}=E(t.modelValue);x(t.modelValue),F([o,u],()=>{const a=p();try{const f=JSON.parse(JSON.stringify(t.modelValue||{}));JSON.stringify(a)!==JSON.stringify(f)&&n("update:modelValue",a)}catch{n("update:modelValue",a)}},{deep:!0}),F(()=>t.modelValue,a=>{try{const f=p();JSON.stringify(a||{})!==JSON.stringify(f)&&a&&x(a)}catch{a&&x(a)}},{deep:!0});function r(a){c(a)}function y(a){a&&!u.value.includes(a)&&u.value.push(a)}function N(a){m(a)}return(a,f)=>(i(),d("div",se,[f[0]||(f[0]=s("div",null,[s("h3",{class:"text-sm font-medium"},"Input Configuration"),s("p",{class:"text-sm text-muted-foreground"},"Select which input fields this machine group will use")],-1)),O(K,{"selected-fields":k(o),onFieldToggled:r},null,8,["selected-fields"]),k(g)?(i(),$(X,{key:0,"grade-types":k(u),onAdd:y,onRemove:N},null,8,["grade-types"])):v("",!0),e.showErrors&&e.errorMessage?(i(),d("div",re,h(e.errorMessage),1)):v("",!0),e.showPreview?(i(),$(te,{key:2,config:k(p)()},null,8,["config"])):v("",!0)]))}});export{ae as _,le as a};
