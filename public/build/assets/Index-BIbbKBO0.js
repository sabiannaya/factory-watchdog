import{d as We,f as q,g as d,x as ue,B as x,l as Xe,k as Ke,O as Je,c as u,m as i,u as s,p as Qe,w as _,a as e,e as C,t as a,b as k,q as m,n as L,o as r,z as ce,F as $,i as E,M as Ze,s as Ge,aj as de,L as et,j as pe,ac as _e}from"./app-i1_2c9TI.js";import{_ as tt}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWREGGXY.js";import{c as R,u as st,_ as at,a as ot,b as nt,d as me}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B0bB4Y56.js";import{_ as lt,a as rt,b as it,c as ut,d as ct,e as dt,f as pt}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-B5Z9-k2f.js";import{_ as _t}from"./AlertDialogFooter.vue_vue_type_script_setup_true_lang-Dj65FhkU.js";import{_ as Z,P as mt}from"./IconActionButton.vue_vue_type_script_setup_true_lang-Cu3IcDcB.js";import{_ as vt}from"./Input.vue_vue_type_script_setup_true_lang-mGQONf2a.js";import{_ as G}from"./Spinner.vue_vue_type_script_setup_true_lang-Ca7klY01.js";import{_ as ft}from"./ToastNotifications.vue_vue_type_script_setup_true_lang-mcyszUyt.js";import{u as gt}from"./useToast-C_zToptU.js";import{F as ht}from"./file-down-bpwgZGX2.js";import{T as ve}from"./trash-2-D_kG-H42.js";import{X as fe}from"./x-T-BkQ4N0.js";import{C as bt}from"./chevron-down-C8FjIUWp.js";import{S as xt}from"./search-BWjjXBCD.js";import{E as yt}from"./eye-zQDYR7PF.js";import{C as ge}from"./check-BbNqkkZS.js";import"./VisuallyHidden-CgfYLdxu.js";import"./index-C4J_hXM0.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=R("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=R("FileUpIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=R("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=R("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=R("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),St={class:"p-4"},Ct={class:"flex items-center justify-between"},$t={class:"text-2xl font-semibold"},qt={class:"text-sm text-muted-foreground"},Pt={class:"flex gap-2"},It={class:"flex items-center"},Dt={class:"text-sm mr-2"},jt=["value"],Tt={key:0,class:"mt-4 overflow-hidden"},Mt={class:"rounded-lg border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/30 p-6"},Ut={class:"flex items-start justify-between mb-4"},Et={class:"text-lg font-semibold text-blue-900 dark:text-blue-100"},Ft={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},Nt={class:"mb-4 p-4 bg-white dark:bg-zinc-900 rounded-lg border border-blue-100 dark:border-blue-900"},Vt={class:"font-medium text-sm mb-2"},Lt={class:"text-sm text-muted-foreground space-y-1 list-decimal list-inside"},At={class:"flex flex-wrap items-center gap-4"},Ot={class:"flex-1 min-w-[200px]"},Rt={class:"flex items-center gap-2"},Ht=["disabled"],Bt={key:0,class:"mt-2 text-sm text-blue-700 dark:text-blue-300"},Yt={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},Wt={class:"block text-sm font-medium mb-2"},Xt={class:"block text-sm font-medium mb-2"},Kt={class:"truncate"},Jt=["onClick"],Qt={class:"block text-sm font-medium mb-2"},Zt={class:"relative"},Gt={class:"mt-4"},es={class:"overflow-x-auto"},ts={class:"w-full table-auto border-collapse"},ss={class:"text-left"},as={class:"px-3 py-2 text-sm font-medium w-12"},os=["checked","indeterminate"],ns={class:"px-3 py-2 text-sm font-medium"},ls={class:"px-3 py-2 text-sm font-medium"},rs={class:"px-3 py-2 text-sm font-medium"},is={class:"px-3 py-2 text-sm font-medium"},us={class:"px-3 py-2 text-sm font-medium"},cs={class:"px-3 py-2 text-sm font-medium"},ds={class:"px-3 py-2 text-sm font-medium"},ps={class:"px-3 py-2 text-sm"},_s=["checked","onChange"],ms={class:"px-3 py-2 text-sm font-mono"},vs={class:"px-3 py-2 text-sm"},fs={class:"px-3 py-2 text-sm"},gs={class:"px-3 py-2 text-sm font-semibold"},hs={class:"px-3 py-2 text-sm"},bs={class:"px-3 py-2 text-sm"},xs={class:"px-3 py-2 text-sm"},ys={class:"flex items-center gap-4"},ks={key:0},ws={colspan:"8",class:"px-3 py-8 text-center text-sm text-muted-foreground"},zs={class:"mt-4 flex items-center justify-end gap-2"},Ss=["disabled"],Cs=["disabled","onClick"],$s={key:1,class:"px-3 text-sm text-muted-foreground"},qs=["disabled"],Ps={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Is={class:"relative z-10 w-full max-w-5xl max-h-[90vh] m-4 bg-white dark:bg-zinc-900 rounded-lg shadow-xl flex flex-col"},Ds={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-700"},js={class:"text-lg font-semibold"},Ts={class:"text-sm text-muted-foreground"},Ms={key:0,class:"p-4 border-b border-gray-200 dark:border-zinc-700"},Us={class:"flex flex-wrap gap-4"},Es={class:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg"},Fs={class:"text-sm text-muted-foreground"},Ns={class:"font-semibold"},Vs={class:"flex items-center gap-2 px-3 py-2 bg-green-100 dark:bg-green-900/30 rounded-lg"},Ls={class:"text-sm text-green-700 dark:text-green-300"},As={class:"font-semibold text-green-700 dark:text-green-300"},Os={key:0,class:"flex items-center gap-2 px-3 py-2 bg-red-100 dark:bg-red-900/30 rounded-lg"},Rs={class:"text-sm text-red-700 dark:text-red-300"},Hs={class:"font-semibold text-red-700 dark:text-red-300"},Bs={key:0,class:"mt-3 p-3 bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg"},Ys={class:"flex items-start gap-2"},Ws={class:"font-medium text-amber-800 dark:text-amber-200"},Xs={class:"text-sm text-amber-700 dark:text-amber-300"},Ks={class:"flex-1 overflow-auto p-4"},Js={class:"w-full table-auto border-collapse text-sm"},Qs={class:"sticky top-0 bg-white dark:bg-zinc-900"},Zs={class:"text-left border-b border-gray-200 dark:border-zinc-700"},Gs={class:"px-3 py-2 font-medium w-16"},ea={class:"px-3 py-2 font-medium w-10"},ta={class:"px-3 py-2 font-medium"},sa={class:"px-3 py-2 font-medium"},aa={class:"px-3 py-2 font-medium"},oa={class:"px-3 py-2 font-medium"},na={class:"px-3 py-2 font-medium"},la={class:"px-3 py-2 font-medium"},ra={class:"px-3 py-2 font-medium min-w-[200px]"},ia={class:"px-3 py-2 font-mono text-muted-foreground"},ua={class:"px-3 py-2"},ca={class:"px-3 py-2 font-mono"},da={key:0},pa={key:1,class:"text-muted-foreground italic"},_a={class:"px-3 py-2"},ma={class:"px-3 py-2"},va={class:"px-3 py-2"},fa={class:"px-3 py-2"},ga=["title"],ha={class:"px-3 py-2"},ba={key:0,class:"text-xs text-red-600 dark:text-red-400 space-y-0.5"},xa={key:1,class:"text-green-600 dark:text-green-400 text-xs"},ya={key:0},ka={key:1,class:"p-4 border-t border-gray-200 dark:border-zinc-700"},wa={class:"flex items-center justify-center gap-2"},za=["disabled"],Sa=["disabled","onClick"],Ca={key:1,class:"px-2 text-sm text-muted-foreground"},$a=["disabled"],qa={class:"flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-zinc-700 bg-gray-50 dark:bg-zinc-800/50 rounded-b-lg"},Pa=["disabled"],Ka=We({__name:"Index",props:{hourlyInputs:{},productions:{},meta:{}},setup(be){const{t:n}=st(),xe=q(()=>[{title:n("input.title"),href:"/input"},{title:n("input.hourly_input"),href:"/input"}]),T=d(!1),{toasts:ye,dismiss:ke,success:B,error:z}=gt(),S=be,M=q(()=>S.hourlyInputs?.data??[]),te=q(()=>S.productions??[]),b=d(S.meta?.q??""),w=d(S.meta?.date??new Date().toISOString().split("T")[0]),g=d(S.meta?.production_id??""),we=[10,20,50,100],P=d(S.meta?.per_page??20),p=d(new Set),F=d(!1),I=d(null);let Y;const N=d(!1),D=d(null),U=d(!1),H=d(!1),A=d([]),y=d(null),v=d({current_page:1,last_page:1,per_page:20,total:0}),O=d([]),W=d(null),V=d(!1);d(null);const ze=d(!1),se=d({left:0,top:0});ue([w,g],([l,o])=>{x.get("/input",{date:l,production_id:o||null,q:b.value||null,per_page:P.value,page:1},{preserveState:!0,replace:!0})});const ae=()=>{x.get("/input",{q:b.value||null,date:w.value,production_id:g.value||null,per_page:P.value,page:1},{preserveState:!0,replace:!0})},Se=l=>{x.get("/input",{q:b.value||null,date:w.value,production_id:g.value||null,per_page:P.value,page:1},{preserveState:!0,replace:!0})},Ce=q(()=>{if(!g.value)return n("app.all_productions");const l=te.value.find(o=>String(o.production_id)===String(g.value));return l?l.production_name:n("app.all_productions")}),oe=l=>{g.value=l||"",ae()},X=d(null),ne=d(0),K=()=>{ne.value=X.value?X.value.offsetWidth:0};Xe(()=>{Ke(K),window.addEventListener("resize",K)}),Je(()=>{window.removeEventListener("resize",K)}),ue(b,()=>{Y&&clearTimeout(Y),Y=setTimeout(ae,800)});const $e=()=>{const l=S.hourlyInputs?.pagination,o=l?.current_page??1,t=l?.last_page??1;o>=t||x.get("/input",{page:o+1,date:w.value,production_id:g.value||null,q:b.value||null},{preserveState:!0})},qe=()=>{const o=S.hourlyInputs?.pagination?.current_page??1;o<=1||x.get("/input",{page:o-1,date:w.value,production_id:g.value||null,q:b.value||null},{preserveState:!0})},j=q(()=>{const l=S.hourlyInputs?.pagination??null;return{current_page:l?.current_page??1,last_page:l?.last_page??1,per_page:l?.per_page??P.value}}),Pe=q(()=>{const l=j.value.current_page??1,o=j.value.last_page??1,t=[];if(o<=7){for(let f=1;f<=o;f++)t.push(f);return t}t.push(1);const c=Math.max(2,l-2),h=Math.min(o-1,l+2);c>2&&t.push("...");for(let f=c;f<=h;f++)t.push(f);return h<o-1&&t.push("..."),t.push(o),t}),Ie=l=>{const o=j.value.current_page??1;l!==o&&x.get("/input",{page:l,date:w.value,production_id:g.value||null,q:b.value||null,per_page:P.value},{preserveState:!0})},De=l=>x.get(`/input/${l}`),je=l=>x.get(`/input/${l}/edit`),le=()=>{const o=S.hourlyInputs?.pagination?.current_page??1,t=new URLSearchParams;return t.append("date",w.value),g.value&&t.append("production_id",String(g.value)),b.value&&t.append("q",b.value),t.append("page",String(o)),t.append("per_page",String(P.value)),t.toString()},Te=l=>{I.value=l,F.value=!0},Me=()=>{if(!I.value)return;const l=le();x.delete(`/input/${I.value}?${l}`,{preserveState:!0,onSuccess:()=>{B("Deleted","Hourly input deleted successfully.")},onError:o=>{const t=o?.response?.data?.message??"Unable to delete hourly input.";z("Delete failed",t)}}),F.value=!1,I.value=null},Ue=l=>{p.value.has(l)?p.value.delete(l):p.value.add(l)},Ee=()=>{p.value.size===M.value.length?p.value.clear():M.value.forEach(l=>p.value.add(l.hourly_log_id))},Fe=q(()=>M.value.length>0&&p.value.size===M.value.length),Ne=q(()=>p.value.size>0&&p.value.size<M.value.length),Ve=()=>{p.value.size!==0&&(I.value=null,F.value=!0)},Le=()=>{const l=Array.from(p.value),o=le();x.post(`/input/bulk-delete?${o}`,{ids:l},{preserveState:!0,onSuccess:()=>{p.value.clear(),F.value=!1,B("Deleted",`${l.length} hourly inputs deleted.`)},onError:t=>{const c=t?.response?.data?.message??"Unable to delete hourly inputs.";z("Delete failed",c)}})},Ae=()=>{const l=new URLSearchParams;l.append("date",w.value),g.value&&l.append("production_id",String(g.value)),b.value&&l.append("q",b.value),window.location.href=`/input/export?${l.toString()}`},re=()=>{N.value=!N.value,N.value||ie()},ie=()=>{D.value=null,A.value=[],y.value=null,O.value=[],W.value&&(W.value.value="")},Oe=()=>{window.location.href="/input/import/template"},Re=l=>{const t=l.target.files?.[0];t&&(D.value=t)},He=async()=>{if(!D.value){z("No file","Please select a file to upload.");return}U.value=!0;const l=new FormData;l.append("file",D.value);try{const o=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),t=await fetch("/input/import/preview",{method:"POST",headers:{"X-CSRF-TOKEN":o||""},body:l});if(!t.ok){const h=await t.json();z("Upload failed",h.message||`Upload failed with status ${t.status}`);return}const c=await t.json();if(!c.success){z("Upload failed",c.message||"Failed to process file.");return}A.value=c.data,y.value=c.summary,v.value=c.pagination,O.value=c.import_data,H.value=!0}catch(o){z("Upload failed",o.message||"An error occurred while processing the file.")}finally{U.value=!1}},J=async l=>{if(l===v.value.current_page||U.value)return;const o=v.value.per_page,t=O.value.length,c=Math.ceil(t/o),h=(l-1)*o;A.value=O.value.slice(h,h+o),v.value={...v.value,current_page:l,last_page:c}},Be=q(()=>{const l=v.value.current_page,o=v.value.last_page,t=[];if(o<=7){for(let f=1;f<=o;f++)t.push(f);return t}t.push(1);const c=Math.max(2,l-2),h=Math.min(o-1,l+2);c>2&&t.push("...");for(let f=c;f<=h;f++)t.push(f);return h<o-1&&t.push("..."),t.push(o),t}),Q=()=>{H.value=!1},Ye=async()=>{if(!y.value?.can_import){z("Cannot import","Please fix all validation errors before importing.");return}V.value=!0;const l=O.value.filter(o=>o.is_valid).map(o=>({production_machine_group_id:o.production_machine_group_id,recorded_at:o.datetime_parsed,qty_normal:o.qty_normal,qty_reject:o.qty_reject,keterangan:o.keterangan}));try{const o=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),t=await fetch("/input/import/execute",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o||""},body:JSON.stringify({rows:l})});if(!t.ok){const h=await t.json();z("Import failed",h.message||`Import failed with status ${t.status}`);return}const c=await t.json();if(!c.success){z("Import failed",c.message||"Failed to import data.");return}B("Import successful",c.message),H.value=!1,N.value=!1,ie(),x.reload({preserveState:!0})}catch(o){z("Import failed",o.message||"An error occurred while importing data.")}finally{V.value=!1}};return x.on("start",()=>T.value=!0),x.on("finish",()=>T.value=!1),(l,o)=>(r(),u($,null,[i(s(Qe),{title:"Hourly Input"}),i(ft,{toasts:s(ye),onDismiss:s(ke)},null,8,["toasts","onDismiss"]),i(tt,{breadcrumbs:xe.value},{default:_(()=>[e("div",St,[e("div",Ct,[e("div",null,[e("h2",$t,a(s(n)("input.hourly_input")),1),e("p",qt,a(s(n)("input.description")),1)]),e("div",Pt,[e("button",{onClick:Ae,class:"btn-secondary flex items-center gap-2 hover:cursor-pointer"},[i(s(ht),{class:"size-4"}),m(" "+a(s(n)("app.export")),1)]),e("button",{onClick:re,class:L(["btn-secondary flex items-center gap-2 hover:cursor-pointer",{"bg-blue-50 dark:bg-blue-950 border-blue-300 dark:border-blue-700":N.value}])},[i(s(wt),{class:"size-4"}),m(" "+a(s(n)("app.import")),1)],2),p.value.size>0?(r(),u("button",{key:0,onClick:Ve,class:"btn-secondary flex items-center gap-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-950 hover:cursor-pointer"},[i(s(ve),{class:"size-4"}),m(" "+a(s(n)("input.delete_selected",{count:p.value.size})),1)])):k("",!0),e("div",It,[e("label",Dt,a(s(n)("app.per_page")),1),ce(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>P.value=t),onChange:o[1]||(o[1]=t=>Se(void 0)),class:"input w-24"},[(r(),u($,null,E(we,t=>e("option",{key:t,value:t},a(t),9,jt)),64))],544),[[Ze,P.value,void 0,{number:!0}]])]),i(s(Ge),{href:`/input/create?date=${w.value}&production_id=${g.value||""}`,class:"btn flex items-center gap-2 rounded-md shadow-sm transition-colors transition-shadow duration-150 hover:opacity-90 hover:shadow-md hover:cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black/10 dark:focus:ring-white/20"},{default:_(()=>[i(s(zt),{class:"size-4"}),m(" "+a(s(n)("input.record_input")),1)]),_:1},8,["href"])])]),i(de,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:_(()=>[N.value?(r(),u("div",Tt,[e("div",Mt,[e("div",Ut,[e("div",null,[e("h3",Et,a(s(n)("input.import_from_excel")),1),e("p",Ft,a(s(n)("input.bulk_import")),1)]),e("button",{onClick:re,class:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900 rounded hover:cursor-pointer"},[i(s(fe),{class:"size-5 text-blue-600 dark:text-blue-400"})])]),e("div",Nt,[e("h4",Vt,a(s(n)("input.import_procedure")),1),e("ol",Lt,[e("li",null,a(s(n)("input.import_step_1")),1),e("li",null,a(s(n)("input.import_step_2")),1),e("li",null,[e("strong",null,a(s(n)("input.production")),1),m(" "+a(s(n)("app.and")||"and")+" ",1),e("strong",null,a(s(n)("input.machine_group")),1),m(" "+a(s(n)("input.must_match_exactly")||"names must match exactly (case-sensitive)"),1)]),e("li",null,[e("strong",null,a(s(n)("input.datetime")),1),m(" "+a(s(n)("input.format")||"format")+": ",1),o[9]||(o[9]=e("code",{class:"px-1 py-0.5 bg-gray-100 dark:bg-zinc-800 rounded text-xs"},"YYYY-MM-DD HH:00:00",-1)),o[10]||(o[10]=m(" (e.g., 2026-01-15 08:00:00) ",-1))]),e("li",null,a(s(n)("input.import_step_5")),1)])]),e("div",At,[e("button",{onClick:Oe,class:"btn-secondary flex items-center gap-2 hover:cursor-pointer"},[i(s(kt),{class:"size-4"}),m(" "+a(s(n)("input.download_template")),1)]),e("div",Ot,[e("div",Rt,[e("input",{ref_key:"fileInputRef",ref:W,type:"file",accept:".xlsx,.xls,.csv",onChange:Re,class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 dark:file:bg-blue-900 dark:file:text-blue-200 hover:file:bg-blue-100 dark:hover:file:bg-blue-800 file:cursor-pointer file:transition-colors"},null,544)])]),e("button",{onClick:He,disabled:!D.value||U.value,class:L(["btn flex items-center gap-2 hover:cursor-pointer",{"opacity-50 cursor-not-allowed":!D.value||U.value}])},[U.value?(r(),C(s(G),{key:1,class:"size-4"})):(r(),C(s(he),{key:0,class:"size-4"})),m(" "+a(U.value?s(n)("input.processing"):s(n)("input.upload_preview")),1)],10,Ht)]),D.value?(r(),u("p",Bt,[m(a(s(n)("input.selected_file"))+" ",1),e("strong",null,a(D.value.name),1)])):k("",!0)])])):k("",!0)]),_:1}),e("div",Yt,[e("div",null,[e("label",Wt,a(s(n)("app.date")),1),ce(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>w.value=t),type:"date",class:"input w-full"},null,512),[[et,w.value]])]),e("div",null,[e("label",Xt,a(s(n)("input.production")),1),i(s(at),null,{default:_(()=>[i(s(ot),{"as-child":!0,style:pe({"--reka-dropdown-menu-trigger-width":ne.value+"px"})},{default:_(()=>[e("button",{ref_key:"triggerRef",ref:X,type:"button",class:"input w-full flex items-center justify-between"},[e("span",Kt,a(Ce.value),1),i(s(bt),{class:"ml-2 pr-1 size-4"})],512)]),_:1},8,["style"]),i(s(nt),{align:"start",sideOffset:4,class:"w-(--reka-dropdown-menu-trigger-width) min-w-[12rem]"},{default:_(()=>[i(s(me),{"as-child":!0},{default:_(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:o[3]||(o[3]=t=>oe(""))},a(s(n)("app.all_productions")),1)]),_:1}),(r(!0),u($,null,E(te.value,t=>(r(),C(s(me),{key:t.production_id,"as-child":!0},{default:_(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:c=>oe(t.production_id)},a(t.production_name),9,Jt)]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",null,[e("label",Qt,a(s(n)("input.search")),1),e("div",Zt,[i(s(xt),{class:"absolute left-2 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),i(s(vt),{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=t=>b.value=t),disabled:T.value,type:"search",placeholder:"Search...",class:"pl-8"},null,8,["modelValue","disabled"]),T.value?(r(),C(s(G),{key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground"})):k("",!0)])])]),e("div",Gt,[e("div",es,[e("table",ts,[e("thead",null,[e("tr",ss,[e("th",as,[e("input",{type:"checkbox",checked:Fe.value,indeterminate:Ne.value,onChange:Ee},null,40,os)]),e("th",ns,a(s(n)("app.hour")),1),e("th",ls,a(s(n)("input.production")),1),e("th",rs,a(s(n)("input.machine_group")),1),e("th",is,a(s(n)("input.total_qty")),1),e("th",us,a(s(n)("input.normal_qty")),1),e("th",cs,a(s(n)("input.reject_qty")),1),e("th",ds,a(s(n)("app.actions")),1)])]),e("tbody",null,[(r(!0),u($,null,E(M.value,t=>(r(),u("tr",{key:t.hourly_log_id,class:"border-t"},[e("td",ps,[e("input",{type:"checkbox",checked:p.value.has(t.hourly_log_id),onChange:()=>Ue(t.hourly_log_id)},null,40,_s)]),e("td",ms,a(t.hour),1),e("td",vs,a(t.production_name),1),e("td",fs,a(t.machine_group),1),e("td",gs,a((t.output_qty_normal??0)+(t.output_qty_reject??0)),1),e("td",hs,a(t.output_qty_normal!==null?t.output_qty_normal:"-"),1),e("td",bs,a(t.output_qty_reject!==null?t.output_qty_reject:"-"),1),e("td",xs,[e("div",ys,[i(Z,{icon:s(yt),label:"Detail",color:"blue",onClick:()=>De(t.hourly_log_id)},null,8,["icon","onClick"]),i(Z,{icon:s(mt),label:"Edit",color:"amber",onClick:()=>je(t.hourly_log_id)},null,8,["icon","onClick"]),i(Z,{icon:s(ve),label:"Delete",color:"red",onClick:()=>Te(t.hourly_log_id)},null,8,["icon","onClick"])])])]))),128)),M.value.length===0?(r(),u("tr",ks,[e("td",ws,a(s(n)("input.no_data")),1)])):k("",!0)])])]),e("div",zs,[e("button",{class:"hover:cursor-pointer btn",disabled:j.value.current_page<=1||T.value,onClick:qe},a(s(n)("app.previous")),9,Ss),(r(!0),u($,null,E(Pe.value,t=>(r(),u($,{key:typeof t=="number"?`p-${t}`:`e-${Math.random()}`},[typeof t=="number"?(r(),u("button",{key:0,class:L(["hover:cursor-pointer btn",{"opacity-90 ring-2 ring-offset-2 ring-black/10":t===j.value.current_page}]),disabled:t===j.value.current_page||T.value,onClick:()=>Ie(Number(t))},a(t),11,Cs)):(r(),u("span",$s,a(t),1))],64))),128)),e("button",{class:"hover:cursor-pointer btn",disabled:j.value.current_page>=j.value.last_page||T.value,onClick:$e},a(s(n)("app.next")),9,qs)])])]),i(s(lt),{open:F.value,"onUpdate:open":o[6]||(o[6]=t=>F.value=t)},{default:_(()=>[i(s(rt),null,{default:_(()=>[i(s(it),null,{default:_(()=>[i(s(ut),null,{default:_(()=>[m(a(I.value?s(n)("input.confirm_delete"):s(n)("input.confirm_delete_multiple",{count:p.value.size})),1)]),_:1}),i(s(ct),null,{default:_(()=>[m(a(I.value?s(n)("input.delete_permanent"):s(n)("input.delete_permanent_multiple",{count:p.value.size})),1)]),_:1})]),_:1}),i(s(_t),null,{default:_(()=>[i(s(dt),null,{default:_(()=>[m(a(s(n)("app.cancel")),1)]),_:1}),i(s(pt),{class:"bg-red-600 hover:bg-red-700 text-white",onClick:o[5]||(o[5]=t=>I.value?Me():Le())},{default:_(()=>[m(a(s(n)("app.delete")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),(r(),C(_e,{to:"body"},[i(de,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[H.value?(r(),u("div",Ps,[e("div",{class:"fixed inset-0 bg-black/50 dark:bg-black/70",onClick:Q}),e("div",Is,[e("div",Ds,[e("div",null,[e("h3",js,a(s(n)("input.import_preview")),1),e("p",Ts,a(s(n)("input.review_before_import")),1)]),e("button",{onClick:Q,class:"p-1 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded"},[i(s(fe),{class:"size-5"})])]),y.value?(r(),u("div",Ms,[e("div",Us,[e("div",Es,[e("span",Fs,a(s(n)("input.total_rows"))+":",1),e("span",Ns,a(y.value.total_rows),1)]),e("div",Vs,[i(s(ge),{class:"size-4 text-green-600 dark:text-green-400"}),e("span",Ls,a(s(n)("input.valid"))+":",1),e("span",As,a(y.value.valid_rows),1)]),y.value.invalid_rows>0?(r(),u("div",Os,[i(s(ee),{class:"size-4 text-red-600 dark:text-red-400"}),e("span",Rs,a(s(n)("input.invalid"))+":",1),e("span",Hs,a(y.value.invalid_rows),1)])):k("",!0)]),y.value.can_import?k("",!0):(r(),u("div",Bs,[e("div",Ys,[i(s(ee),{class:"size-5 text-amber-600 dark:text-amber-400 shrink-0 mt-0.5"}),e("div",null,[e("p",Ws,a(s(n)("input.cannot_import")),1),e("p",Xs,a(s(n)("input.fix_errors")),1)])])]))])):k("",!0),e("div",Ks,[e("table",Js,[e("thead",Qs,[e("tr",Zs,[e("th",Gs,a(s(n)("input.row")),1),e("th",ea,a(s(n)("input.status")),1),e("th",ta,a(s(n)("input.datetime")),1),e("th",sa,a(s(n)("input.production")),1),e("th",aa,a(s(n)("input.machine_group")),1),e("th",oa,a(s(n)("input.normal_qty")),1),e("th",na,a(s(n)("input.reject_qty")),1),e("th",la,a(s(n)("input.notes")),1),e("th",ra,a(s(n)("input.errors")),1)])]),e("tbody",null,[(r(!0),u($,null,E(A.value,t=>(r(),u("tr",{key:t.row_number,class:L(["border-b border-gray-100 dark:border-zinc-800",{"bg-red-50 dark:bg-red-950/20":!t.is_valid,"hover:bg-gray-50 dark:hover:bg-zinc-800/50":t.is_valid}])},[e("td",ia,a(t.row_number),1),e("td",ua,[t.is_valid?(r(),C(s(ge),{key:0,class:"size-4 text-green-600 dark:text-green-400"})):(r(),C(s(ee),{key:1,class:"size-4 text-red-600 dark:text-red-400"}))]),e("td",ca,[t.datetime_parsed?(r(),u("span",da,a(t.datetime_parsed),1)):(r(),u("span",pa,a(t.datetime_raw||"-"),1))]),e("td",_a,a(t.production_name||"-"),1),e("td",ma,a(t.machine_group_name||"-"),1),e("td",va,a(t.qty_normal??"-"),1),e("td",fa,a(t.qty_reject??"-"),1),e("td",{class:"px-3 py-2 max-w-[150px] truncate",title:t.keterangan||""},a(t.keterangan||"-"),9,ga),e("td",ha,[t.errors&&t.errors.length>0?(r(),u("ul",ba,[(r(!0),u($,null,E(t.errors,(c,h)=>(r(),u("li",{key:h,class:"flex items-start gap-1"},[o[11]||(o[11]=e("span",{class:"shrink-0"},"â€¢",-1)),e("span",null,a(c),1)]))),128))])):(r(),u("span",xa,a(s(n)("input.ok")),1))])],2))),128)),A.value.length===0?(r(),u("tr",ya,[...o[12]||(o[12]=[e("td",{colspan:"9",class:"px-3 py-8 text-center text-muted-foreground"}," No data found in the uploaded file. ",-1)])])):k("",!0)])])]),v.value.last_page>1?(r(),u("div",ka,[e("div",wa,[e("button",{class:"hover:cursor-pointer btn btn-sm",disabled:v.value.current_page<=1,onClick:o[7]||(o[7]=t=>J(v.value.current_page-1))},a(s(n)("app.previous")),9,za),(r(!0),u($,null,E(Be.value,t=>(r(),u($,{key:typeof t=="number"?`ip-${t}`:`ie-${Math.random()}`},[typeof t=="number"?(r(),u("button",{key:0,class:L(["hover:cursor-pointer btn btn-sm",{"ring-2 ring-offset-2 ring-black/10 dark:ring-white/20":t===v.value.current_page}]),disabled:t===v.value.current_page,onClick:c=>J(t)},a(t),11,Sa)):(r(),u("span",Ca,a(t),1))],64))),128)),e("button",{class:"hover:cursor-pointer btn btn-sm",disabled:v.value.current_page>=v.value.last_page,onClick:o[8]||(o[8]=t=>J(v.value.current_page+1))},a(s(n)("app.next")),9,$a)])])):k("",!0),e("div",qa,[e("button",{onClick:Q,class:"hover:cursor-pointer btn-secondary"},a(s(n)("app.cancel")),1),e("button",{onClick:Ye,disabled:!y.value?.can_import||V.value,class:L(["hover:cursor-pointer btn flex items-center gap-2",{"opacity-50 cursor-not-allowed":!y.value?.can_import||V.value}])},[V.value?(r(),C(s(G),{key:1,class:"size-4"})):(r(),C(s(he),{key:0,class:"size-4"})),m(" "+a(V.value?s(n)("input.importing"):s(n)("input.import_records",{count:y.value?.valid_rows??0})),1)],10,Pa)])])])):k("",!0)]),_:1})])),(r(),C(_e,{to:"body"},[ze.value?(r(),u("div",{key:0,style:pe({left:se.value.left+"px",top:se.value.top+"px",position:"fixed",zIndex:9999})},[...o[13]||(o[13]=[e("div",{class:"rounded-md bg-white dark:bg-zinc-900 border shadow-md p-3 text-xs text-muted-foreground w-72"},[e("div",{class:"font-medium mb-1"},"How Variance is Calculated"),e("div",null,"Variance = (Normal Output - Normal Target) + (Target Reject - Reject Output)"),e("div",{class:"text-2xs text-muted-foreground mt-1"},"Positive variance means output is better than target.")],-1)])],4)):k("",!0)]))]),_:1},8,["breadcrumbs"])],64))}});export{Ka as default};
