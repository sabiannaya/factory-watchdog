import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWREGGXY.js";import{d as z,f as b,g as w,l as F,B as r,O as L,c as x,m as l,u as e,p as M,w as u,a as o,t as c,o as h,F as C,q as I}from"./app-i1_2c9TI.js";import{_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-D5Bbd2Ot.js";import{u as U,_ as A,a as G,b as J,d as k}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B0bB4Y56.js";import{_ as y,P as K}from"./IconActionButton.vue_vue_type_script_setup_true_lang-Cu3IcDcB.js";import{C as Q}from"./chevron-down-C8FjIUWp.js";import{E as R}from"./eye-zQDYR7PF.js";import{T as W}from"./trash-2-D_kG-H42.js";import"./VisuallyHidden-CgfYLdxu.js";import"./index-C4J_hXM0.js";import"./x-T-BkQ4N0.js";import"./Input.vue_vue_type_script_setup_true_lang-mGQONf2a.js";import"./Spinner.vue_vue_type_script_setup_true_lang-Ca7klY01.js";import"./search-BWjjXBCD.js";const X={class:"p-4 space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"text-2xl font-semibold"},ee={class:"text-sm text-muted-foreground"},te={class:"flex items-center gap-3 mb-2"},ae={class:"text-sm"},ne=["disabled"],oe={key:1,class:"flex items-center gap-4"},re={class:"mt-4 flex items-center justify-end gap-2"},se=["disabled"],ie=["disabled"],ye=z({__name:"Index",props:{productions:{},meta:{}},setup(S){const{t}=U(),$=b(()=>[{title:t("data_management.data_management"),href:"/data-management/production"},{title:t("data_management.production"),href:"/data-management/production"}]),P=b(()=>[{key:"production_id",label:t("data_management.id"),type:"number",sortable:!0,findable:!1},{key:"production_name",label:t("data_management.production_name"),type:"string",sortable:!0,findable:!0},{key:"status",label:t("data_management.status"),type:"string",sortable:!0,findable:!0},{key:"created_at",label:t("data_management.created"),type:"date",sortable:!0,findable:!0},{key:"actions",label:t("data_management.actions"),type:"string",sortable:!1,findable:!1}]),a=S,q=b(()=>a.productions?.data??[]),m=w(!1),p=w(a.meta?.status??""),B=b(()=>p.value?p.value==="active"?t("data_management.active"):p.value==="inactive"?t("data_management.inactive"):t("data_management.all"):t("data_management.all")),v=n=>{p.value=n,T()},D=n=>{const s=a.meta?.per_page??10,i=a.meta?.sort??"production_name",d=a.meta?.direction??"asc";r.get(window.location.pathname,{q:n,per_page:s,sort:i,direction:d},{preserveState:!0,replace:!0})},E=({sort:n,direction:s})=>{const i=a.meta?.per_page??10,d=a.meta?.q??"";n&&r.get(window.location.pathname,{sort:n,direction:s??"asc",per_page:i,q:d},{preserveState:!0,replace:!0})},N=()=>{const n=a.productions?.next_cursor;n&&r.get(window.location.pathname,{cursor:n},{preserveState:!0,replace:!0})},H=()=>{const n=a.productions?.prev_cursor;n&&r.get(window.location.pathname,{cursor:n},{preserveState:!0,replace:!0})},T=()=>{const n=a.meta?.per_page??10,s=a.meta?.q??"",i=a.meta?.sort??"production_name",d=a.meta?.direction??"asc";r.get(window.location.pathname,{status:p.value||null,q:s,sort:i,direction:d,per_page:n},{preserveState:!0,replace:!0})};let _=null,f=null,g=null;F(()=>{_=()=>m.value=!0,f=()=>m.value=!1,g=()=>m.value=!1,r.on("start",_),r.on("finish",f),r.on("error",g)}),L(()=>{_&&r.on("start",_),f&&r.on("finish",f),g&&r.on("error",g)});const V=n=>{window.confirm(t("data_management.confirm_delete_production"))&&r.visit(`/data-management/production/${n}`,{method:"delete",preserveState:!1})};return(n,s)=>(h(),x(C,null,[l(e(M),{title:e(t)("data_management.production")},null,8,["title"]),l(j,{breadcrumbs:$.value},{default:u(()=>[o("div",X,[o("div",Y,[o("div",null,[o("h2",Z,c(e(t)("data_management.production")),1),o("p",ee,c(e(t)("data_management.manage_production_records")),1)]),o("button",{class:"hover:cursor-pointer btn",onClick:s[0]||(s[0]=i=>e(r).get("/data-management/production/create"))},c(e(t)("data_management.add_production")),1)]),o("div",te,[o("label",ae,c(e(t)("data_management.status")),1),l(e(A),null,{default:u(()=>[l(e(G),{"as-child":!0},{default:u(()=>[o("button",{type:"button",class:"appearance-none rounded-md border bg-popover text-popover-foreground px-3 py-2 pr-10 text-sm shadow-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 flex items-center gap-2",disabled:m.value},[o("span",null,c(B.value),1),l(e(Q),{class:"ml-1 size-4"})],8,ne)]),_:1}),l(e(J),{class:"min-w-[8rem]"},{default:u(()=>[l(e(k),{"as-child":!0},{default:u(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:s[1]||(s[1]=i=>v(""))},c(e(t)("data_management.all")),1)]),_:1}),l(e(k),{"as-child":!0},{default:u(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:s[2]||(s[2]=i=>v("active"))},c(e(t)("data_management.active")),1)]),_:1}),l(e(k),{"as-child":!0},{default:u(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:s[3]||(s[3]=i=>v("inactive"))},c(e(t)("data_management.inactive")),1)]),_:1})]),_:1})]),_:1})]),l(O,{serverMode:"",data:q.value,columns:P.value,"per-page":5,"initial-sort":a.meta?.sort??"production_name","initial-direction":a.meta?.direction==="desc"?"desc":"asc",loading:m.value,onServerSearch:D,onServerSort:E},{cell:u(({row:i,column:d})=>[d.key!=="actions"?(h(),x(C,{key:0},[I(c(i[d.key]),1)],64)):(h(),x("div",oe,[l(y,{icon:e(R),label:"Detail",color:"blue",onClick:()=>e(r).get(`/data-management/production/${i.production_id}`)},null,8,["icon","onClick"]),l(y,{icon:e(K),label:"Edit",color:"amber",onClick:()=>e(r).get(`/data-management/production/${i.production_id}/edit`)},null,8,["icon","onClick"]),l(y,{icon:e(W),label:"Delete",color:"red",onClick:()=>V(i.production_id)},null,8,["icon","onClick"])]))]),_:1},8,["data","columns","initial-sort","initial-direction","loading"]),o("div",re,[o("button",{class:"hover:cursor-pointer btn",disabled:!a.productions?.prev_cursor,onClick:H},c(e(t)("data_management.previous")),9,se),o("button",{class:"hover:cursor-pointer btn",disabled:!a.productions?.next_cursor,onClick:N},c(e(t)("data_management.next")),9,ie)])])]),_:1},8,["breadcrumbs"])],64))}});export{ye as default};
