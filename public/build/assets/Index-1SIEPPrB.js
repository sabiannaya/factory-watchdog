import{d as q,e as M,r as v,j as A,J as a,O as B,c as f,k as l,u as i,l as E,m as b,a as n,H,L as V,o as g,F as x,q as j,t as I}from"./app-ByVm3FOg.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-CA8oNPt4.js";import{_ as F}from"./DataTable.vue_vue_type_script_setup_true_lang-Bgb--yl3.js";import{_,P as U,T as J}from"./IconActionButton.vue_vue_type_script_setup_true_lang-BCAFS0CK.js";import{E as L}from"./eye-CFT0fCRX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C8rHliBE.js";import"./index-CbbRSED3.js";import"./VisuallyHidden-CuZB7xnA.js";import"./useForwardExpose-B_jyS2_j.js";import"./useForwardPropsEmits-DpcW7WWk.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-B5wOFtcm.js";import"./Input.vue_vue_type_script_setup_true_lang-CPkvjD3L.js";import"./Spinner.vue_vue_type_script_setup_true_lang-D3P61CV7.js";import"./search-DCPcnRYA.js";const O={class:"p-4 space-y-4"},z={class:"flex items-center justify-between"},G={class:"flex items-center gap-3 mb-2"},K=["disabled"],Q={key:1,class:"flex items-center gap-4"},R={class:"mt-4 flex items-center justify-end gap-2"},W=["disabled"],X=["disabled"],me=q({__name:"Index",props:{productions:{},meta:{}},setup(y){const h=[{title:"Data Management",href:"/data-management/production"},{title:"Production",href:"/data-management/production"}],k=[{key:"production_id",label:"ID",type:"number",sortable:!0,findable:!1},{key:"production_name",label:"Production Name",type:"string",sortable:!0,findable:!0},{key:"status",label:"Status",type:"string",sortable:!0,findable:!0},{key:"created_at",label:"Created",type:"date",sortable:!0,findable:!0},{key:"actions",label:"Actions",type:"string",sortable:!1,findable:!1}],e=y,S=M(()=>e.productions?.data??[]),c=v(!1),m=v(e.meta?.status??""),C=o=>{const t=e.meta?.per_page??10,r=e.meta?.sort??"production_name",s=e.meta?.direction??"asc";a.get(window.location.pathname,{q:o,per_page:t,sort:r,direction:s},{preserveState:!0,replace:!0})},w=({sort:o,direction:t})=>{const r=e.meta?.per_page??10,s=e.meta?.q??"";o&&a.get(window.location.pathname,{sort:o,direction:t??"asc",per_page:r,q:s},{preserveState:!0,replace:!0})},P=()=>{const o=e.productions?.next_cursor;o&&a.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},D=()=>{const o=e.productions?.prev_cursor;o&&a.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},$=()=>{const o=e.meta?.per_page??10,t=e.meta?.q??"",r=e.meta?.sort??"production_name",s=e.meta?.direction??"asc";a.get(window.location.pathname,{status:m.value||null,q:t,sort:r,direction:s,per_page:o},{preserveState:!0,replace:!0})};let d=null,u=null,p=null;A(()=>{d=()=>c.value=!0,u=()=>c.value=!1,p=()=>c.value=!1,a.on("start",d),a.on("finish",u),a.on("error",p)}),B(()=>{d&&a.on("start",d),u&&a.on("finish",u),p&&a.on("error",p)});const N=o=>{window.confirm("Are you sure you want to delete this production?")&&a.visit(`/data-management/production/${o}`,{method:"delete",preserveState:!1})};return(o,t)=>(g(),f(x,null,[l(i(E),{title:"Production"}),l(T,{breadcrumbs:h},{default:b(()=>[n("div",O,[n("div",z,[t[2]||(t[2]=n("div",null,[n("h2",{class:"text-2xl font-semibold"},"Production"),n("p",{class:"text-sm text-muted-foreground"},"Manage production records")],-1)),n("button",{class:"btn",onClick:t[0]||(t[0]=r=>i(a).get("/data-management/production/create"))}," Create Production ")]),n("div",G,[t[4]||(t[4]=n("label",{class:"text-sm"},"Status",-1)),H(n("select",{class:"appearance-none rounded-md border bg-popover text-popover-foreground px-3 py-2 pr-10 text-sm shadow-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","onUpdate:modelValue":t[1]||(t[1]=r=>m.value=r),onChange:$,disabled:c.value},[...t[3]||(t[3]=[n("option",{value:""},"All",-1),n("option",{value:"active"},"Active",-1),n("option",{value:"inactive"},"Inactive",-1)])],40,K),[[V,m.value]])]),l(F,{serverMode:"",data:S.value,columns:k,"per-page":5,"initial-sort":e.meta?.sort??"production_name","initial-direction":e.meta?.direction==="desc"?"desc":"asc",loading:c.value,onServerSearch:C,onServerSort:w},{cell:b(({row:r,column:s})=>[s.key!=="actions"?(g(),f(x,{key:0},[j(I(r[s.key]),1)],64)):(g(),f("div",Q,[l(_,{icon:i(L),label:"Detail",color:"blue",onClick:()=>i(a).get(`/data-management/production/${r.production_id}`)},null,8,["icon","onClick"]),l(_,{icon:i(U),label:"Edit",color:"amber",onClick:()=>i(a).get(`/data-management/production/${r.production_id}/edit`)},null,8,["icon","onClick"]),l(_,{icon:i(J),label:"Delete",color:"red",onClick:()=>N(r.production_id)},null,8,["icon","onClick"])]))]),_:1},8,["data","initial-sort","initial-direction","loading"]),n("div",R,[n("button",{class:"btn",disabled:!e.productions?.prev_cursor,onClick:D},"Previous",8,W),n("button",{class:"btn",disabled:!e.productions?.next_cursor,onClick:P},"Next",8,X)])])]),_:1})],64))}});export{me as default};
