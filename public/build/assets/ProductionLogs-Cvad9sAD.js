import{d as P,r as u,e as w,J as l,c as T,k as p,u as C,l as F,m as L,a,H as c,I as m,F as V,o as q}from"./app-ByVm3FOg.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-CA8oNPt4.js";import{_ as N}from"./DataTable.vue_vue_type_script_setup_true_lang-Bgb--yl3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C8rHliBE.js";import"./index-CbbRSED3.js";import"./VisuallyHidden-CuZB7xnA.js";import"./useForwardExpose-B_jyS2_j.js";import"./useForwardPropsEmits-DpcW7WWk.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-B5wOFtcm.js";import"./Input.vue_vue_type_script_setup_true_lang-CPkvjD3L.js";import"./Spinner.vue_vue_type_script_setup_true_lang-D3P61CV7.js";import"./search-DCPcnRYA.js";const $={class:"p-4 space-y-4"},B={class:"flex items-center gap-3 mb-3"},E=["disabled"],H=["disabled"],M=["disabled"],U={class:"mt-4 flex items-center justify-end gap-2"},j=["disabled"],A=["disabled"],te=P({__name:"ProductionLogs",props:{logs:{},meta:{}},setup(f){const g=[{title:"Logs",href:"/logs"},{title:"Production Logs",href:"/logs/production"}],t=f,s=u(!1),n=u(t.meta?.date_from??""),i=u(t.meta?.date_to??""),b=w(()=>t.logs?.data??[]),_=e=>{const o=t.meta?.per_page??20,r=t.meta?.sort??"recorded_hour",d=t.meta?.direction??"desc";l.get(window.location.pathname,{q:e,per_page:o,sort:r,direction:d},{preserveState:!0,replace:!0})},v=({sort:e,direction:o})=>{const r=t.meta?.per_page??20,d=t.meta?.q??"";e&&l.get(window.location.pathname,{sort:e,direction:o??"desc",per_page:r,q:d},{preserveState:!0,replace:!0})},x=e=>e?e.includes("T")?e.replace("T"," ")+":00":`${e} 00:00:00`:null,y=e=>e?e.includes("T")?e.replace("T"," ")+":00":`${e} 23:59:59`:null,h=()=>{const e=t.meta?.per_page??20,o=t.meta?.sort??"recorded_hour",r=t.meta?.direction??"desc";l.get(window.location.pathname,{date_from:x(n.value||null),date_to:y(i.value||null),q:t.meta?.q??"",sort:o,direction:r,per_page:e},{preserveState:!0,replace:!0})},S=()=>{const e=t.logs?.next_page;e&&l.visit(e,{preserveState:!0,replace:!0})},k=()=>{const e=t.logs?.prev_page;e&&l.visit(e,{preserveState:!0,replace:!0})};return l.on("start",()=>s.value=!0),l.on("finish",()=>s.value=!1),(e,o)=>(q(),T(V,null,[p(C(F),{title:"Production Logs"}),p(D,{breadcrumbs:g},{default:L(()=>[a("div",$,[o[4]||(o[4]=a("h2",{class:"text-2xl font-semibold"},"Production Logs (hourly)",-1)),o[5]||(o[5]=a("p",{class:"text-sm text-muted-foreground"},"Sums per production per hour",-1)),a("div",B,[o[2]||(o[2]=a("label",{class:"text-sm"},"From",-1)),c(a("input",{type:"datetime-local",class:"input","onUpdate:modelValue":o[0]||(o[0]=r=>n.value=r),disabled:s.value},null,8,E),[[m,n.value]]),o[3]||(o[3]=a("label",{class:"text-sm"},"To",-1)),c(a("input",{type:"datetime-local",class:"input","onUpdate:modelValue":o[1]||(o[1]=r=>i.value=r),disabled:s.value},null,8,H),[[m,i.value]]),a("button",{class:"btn",onClick:h,disabled:s.value},"Apply",8,M)]),p(N,{serverMode:"",data:b.value,columns:[{key:"recorded_hour",label:"Hour",type:"string",sortable:!0,findable:!1},{key:"production_name",label:"Production",type:"string",sortable:!0,findable:!0},{key:"total_target",label:"Target",type:"number",sortable:!0,findable:!1},{key:"total_output",label:"Output",type:"number",sortable:!0,findable:!1},{key:"variance",label:"Variance",type:"number",sortable:!1,findable:!1}],"per-page":20,"initial-sort":t.meta?.sort??"recorded_hour","initial-direction":t.meta?.direction??"desc",loading:s.value,onServerSearch:_,onServerSort:v},null,8,["data","initial-sort","initial-direction","loading"]),a("div",U,[a("button",{class:"btn",disabled:!t.logs?.prev_page||s.value,onClick:k},"Previous",8,j),a("button",{class:"btn",disabled:!t.logs?.next_page||s.value,onClick:S},"Next",8,A)])])]),_:1})],64))}});export{te as default};
