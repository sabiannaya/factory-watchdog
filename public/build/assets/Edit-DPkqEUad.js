import{d as J,f as v,g as S,c as r,m as i,u as t,p as K,w as p,a as e,t as s,y as P,z as b,b as c,q as m,L as g,o as l,F as y,i as h,e as N,B as I}from"./app-i1_2c9TI.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWREGGXY.js";import{u as W}from"./useHourlyInputForm-BnG_B82D.js";import{u as X,_ as B,a as F,b as z,d as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B0bB4Y56.js";import{a as Y,b as Z,c as tt,d as et,e as st,f as ot,_ as ut}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-B5Z9-k2f.js";import{_ as nt}from"./AlertDialogFooter.vue_vue_type_script_setup_true_lang-Dj65FhkU.js";import{u as lt}from"./useToast-C_zToptU.js";import{C as D}from"./chevron-down-C8FjIUWp.js";import"./VisuallyHidden-CgfYLdxu.js";import"./index-C4J_hXM0.js";import"./x-T-BkQ4N0.js";const at={class:"p-4 space-y-6"},rt={class:"text-2xl font-bold"},it={class:"text-muted-foreground"},dt={class:"rounded-lg border border-sidebar-border/70 bg-card p-6"},pt={class:"text-lg font-semibold mb-4"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={class:"block text-sm font-medium mb-2"},_t={key:0,class:"text-red-500 text-sm mt-1"},ft={class:"block text-sm font-medium mb-2"},bt={type:"button",class:"input w-full flex items-center justify-between",required:""},gt=["onClick"],yt={key:0,class:"text-red-500 text-sm mt-1"},vt={class:"rounded-lg border border-sidebar-border/70 bg-card p-6"},ht={class:"text-lg font-semibold mb-4"},xt={class:"text-sm text-muted-foreground mb-4"},kt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wt={class:"block text-sm font-medium mb-2"},Ct={key:0,class:"text-red-500 text-sm mt-1"},qt={class:"block text-sm font-medium mb-2"},$t={key:0,class:"text-red-500 text-sm mt-1"},Vt={key:1,class:"space-y-4 mt-4"},jt={class:"block text-sm font-medium mb-2"},Ut={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},St={class:"block text-sm font-medium mb-2"},Nt=["onUpdate:modelValue"],It={class:"block text-sm font-medium mb-2"},Bt=["onUpdate:modelValue"],Ft={key:2,class:"space-y-4 mt-4"},zt={class:"block text-sm font-medium mb-2"},Dt={type:"button",class:"input w-full flex items-center justify-between",required:""},Gt=["onClick"],Lt={class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Et={key:0},Ht={class:"block text-sm font-medium mb-2"},Mt={class:"block text-sm font-medium mb-2"},Rt={class:"flex items-center gap-3"},Tt=["disabled"],At={class:"mt-4 border-t pt-3"},Ot={class:"text-sm font-medium mb-2"},Jt={class:"rounded-lg bg-muted/50 p-3"},Kt={class:"space-y-1 text-sm"},Pt={key:0},Qt={key:1},Wt={key:2},Xt={key:3,class:"grid grid-cols-2 gap-2 mt-1"},Yt={class:"font-medium"},Zt={class:"font-medium"},te={key:4},ee={key:5},ce=J({__name:"Edit",props:{hourlyInput:{},inputConfig:{},fields:{}},setup(w){const{t:a}=X(),d=w,G=v(()=>[{title:a("input.title"),href:"/input"},{title:a("app.edit"),href:window.location.pathname}]),{form:u,hasChanged:L}=W(d.hourlyInput,d.inputConfig),V=Array.from({length:24},(f,o)=>({value:o,label:`${o.toString().padStart(2,"0")}:00`})),E=v(()=>{const f=Number(u.hour);return V.find(o=>o.value===f)?.label??`${String(f).padStart(2,"0")}:00`}),H=f=>{u.hour=f},x=v(()=>d.inputConfig?.type??"qty_only"),C=v(()=>{const f=x.value;return f==="qty_only"||f==="normal_reject"||d.fields.includes("qty_normal")||d.fields.includes("qty_reject")}),q=v(()=>x.value==="grades"||d.fields.includes("grades")),j=v(()=>x.value==="grade_qty"||d.fields.includes("grade")),{success:M,error:R}=lt(),k=S(!1),U=S(!1),T=()=>{U.value=!0,u.put(`/input/${d.hourlyInput.hourly_log_id}`,{onSuccess:()=>{M("Input updated","Hourly input has been updated"),I.get("/input",{date:u.date})},onError:()=>{R("Failed to update","There was an error updating the input")},onFinish:()=>{U.value=!1,k.value=!1}})},A=()=>{k.value=!0};return(f,o)=>(l(),r(y,null,[i(t(K),{title:t(a)("input.edit_input")},null,8,["title"]),i(Q,{breadcrumbs:G.value},{default:p(()=>[e("div",at,[e("div",null,[e("h1",rt,s(t(a)("input.edit_input")),1),e("p",it,s(d.hourlyInput.production_name)+" â€¢ "+s(d.hourlyInput.machine_group),1)]),e("form",{onSubmit:P(A,["prevent"]),class:"space-y-6"},[e("div",dt,[e("h2",pt,s(t(a)("app.date"))+" & "+s(t(a)("app.hour")),1),e("div",mt,[e("div",null,[e("label",ct,[m(s(t(a)("app.date"))+" ",1),o[8]||(o[8]=e("span",{class:"text-red-500"},"*",-1))]),b(e("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>t(u).date=n),type:"date",class:"input w-full",required:""},null,512),[[g,t(u).date]]),t(u).errors.date?(l(),r("p",_t,s(t(u).errors.date),1)):c("",!0)]),e("div",null,[e("label",ft,[m(s(t(a)("app.hour"))+" ",1),o[9]||(o[9]=e("span",{class:"text-red-500"},"*",-1))]),i(t(B),null,{default:p(()=>[i(t(F),{"as-child":!0},{default:p(()=>[e("button",bt,[e("span",null,s(E.value),1),i(t(D),{class:"ml-2 size-4"})])]),_:1}),i(t(z),{class:"w-[var(--radix-dropdown-menu-trigger-width)]"},{default:p(()=>[(l(!0),r(y,null,h(t(V),n=>(l(),N(t($),{"as-child":!0,key:n.value},{default:p(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:_=>H(n.value)},s(n.label),9,gt)]),_:2},1024))),128))]),_:1})]),_:1}),t(u).errors.hour?(l(),r("p",yt,s(t(u).errors.hour),1)):c("",!0)])])]),e("div",vt,[e("h2",ht,s(t(a)("input.production_output")),1),e("p",xt,[m(s(t(a)("input.input_type"))+" ",1),e("strong",null,s(x.value),1)]),C.value?(l(),r("div",kt,[e("div",null,[e("label",wt,[m(s(t(a)("input.normal_qty"))+" ",1),o[10]||(o[10]=e("span",{class:"text-red-500"},"*",-1))]),b(e("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>t(u).output_qty_normal=n),type:"number",min:"0",class:"input w-full",required:""},null,512),[[g,t(u).output_qty_normal,void 0,{number:!0}]]),t(u).errors.output_qty_normal?(l(),r("p",Ct,s(t(u).errors.output_qty_normal),1)):c("",!0)]),e("div",null,[e("label",qt,s(t(a)("input.reject_qty")),1),b(e("input",{"onUpdate:modelValue":o[2]||(o[2]=n=>t(u).output_qty_reject=n),type:"number",min:"0",class:"input w-full"},null,512),[[g,t(u).output_qty_reject,void 0,{number:!0}]]),t(u).errors.output_qty_reject?(l(),r("p",$t,s(t(u).errors.output_qty_reject),1)):c("",!0)])])):c("",!0),q.value?(l(),r("div",Vt,[e("label",jt,s(t(a)("input.grades")),1),e("div",Ut,[d.inputConfig?.grade_types&&d.inputConfig.grade_types.length?(l(!0),r(y,{key:0},h(d.inputConfig.grade_types,n=>(l(),r("div",{key:n},[e("label",St,s(n),1),b(e("input",{"onUpdate:modelValue":_=>t(u).output_grades[n]=_,type:"number",min:"0",class:"input w-full"},null,8,Nt),[[g,t(u).output_grades[n],void 0,{number:!0}]])]))),128)):(l(!0),r(y,{key:1},h(t(u).output_grades,(n,_)=>(l(),r("div",{key:_},[e("label",It,s(_),1),b(e("input",{"onUpdate:modelValue":O=>t(u).output_grades[_]=O,type:"number",min:"0",class:"input w-full"},null,8,Bt),[[g,t(u).output_grades[_],void 0,{number:!0}]])]))),128))])])):c("",!0),j.value?(l(),r("div",Ft,[e("div",null,[e("label",zt,[m(s(t(a)("input.grade"))+" ",1),o[11]||(o[11]=e("span",{class:"text-red-500"},"*",-1))]),i(t(B),null,{default:p(()=>[i(t(F),{"as-child":!0},{default:p(()=>[e("button",Dt,[e("span",null,s(t(u).output_grade??t(a)("input.select_grade")),1),i(t(D),{class:"ml-2 size-4"})])]),_:1}),i(t(z),{class:"w-[var(--radix-dropdown-menu-trigger-width)]"},{default:p(()=>[i(t($),{"as-child":!0},{default:p(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:o[3]||(o[3]=n=>t(u).output_grade=null)},s(t(a)("input.select_grade")),1)]),_:1}),d.inputConfig?.grade_types?(l(!0),r(y,{key:0},h(d.inputConfig.grade_types,n=>(l(),N(t($),{key:n,"as-child":!0},{default:p(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:_=>t(u).output_grade=n},s(n),9,Gt)]),_:2},1024))),128)):c("",!0)]),_:1})]),_:1})])])):c("",!0),e("div",Lt,[w.fields.includes("ukuran")?(l(),r("div",Et,[e("label",Ht,s(t(a)("input.ukuran")),1),b(e("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>t(u).output_ukuran=n),type:"text",class:"input w-full",placeholder:"e.g., 122x244"},null,512),[[g,t(u).output_ukuran]])])):c("",!0),e("div",null,[e("label",Mt,s(t(a)("input.notes")),1),b(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=n=>t(u).keterangan=n),class:"input w-full",rows:"2",placeholder:"Optional notes..."},null,512),[[g,t(u).keterangan]])])])]),e("div",Rt,[e("button",{type:"submit",class:"hover:cursor-pointer btn",disabled:t(u).processing||!t(L)},s(t(u).processing?t(a)("app.saving"):t(a)("app.update")),9,Tt),e("button",{type:"button",class:"hover:cursor-pointer btn btn-ghost",onClick:o[6]||(o[6]=n=>t(I).get("/input"))},s(t(a)("app.cancel")),1)])],32)])]),_:1},8,["breadcrumbs"]),i(ut,{open:k.value,"onUpdate:open":o[7]||(o[7]=n=>k.value=n)},{default:p(()=>[i(Y,null,{default:p(()=>[i(Z,null,{default:p(()=>[i(tt,null,{default:p(()=>[m(s(t(a)("app.update"))+"?",1)]),_:1}),i(et,null,{default:p(()=>[m(s(t(a)("app.are_you_sure")),1)]),_:1}),e("div",At,[e("h3",Ot,s(t(a)("input.preview")),1),e("div",Jt,[e("div",Kt,[C.value?(l(),r("div",Pt,[o[12]||(o[12]=e("span",{class:"font-medium"},"Normal:",-1)),m(" "+s(t(u).output_qty_normal??0),1)])):c("",!0),C.value?(l(),r("div",Qt,[o[13]||(o[13]=e("span",{class:"font-medium"},"Reject:",-1)),m(" "+s(t(u).output_qty_reject??0),1)])):c("",!0),q.value?(l(),r("div",Wt,[...o[14]||(o[14]=[e("span",{class:"font-medium"},"Grades:",-1)])])):c("",!0),q.value?(l(),r("div",Xt,[d.inputConfig?.grade_types&&d.inputConfig.grade_types.length?(l(!0),r(y,{key:0},h(d.inputConfig.grade_types,n=>(l(),r("div",{key:n},[e("span",Yt,s(n)+":",1),m(" "+s(t(u).output_grades[n]??0),1)]))),128)):(l(!0),r(y,{key:1},h(t(u).output_grades,(n,_)=>(l(),r("div",{key:_},[e("span",Zt,s(_)+":",1),m(" "+s(n??0),1)]))),128))])):c("",!0),j.value?(l(),r("div",te,[o[15]||(o[15]=e("span",{class:"font-medium"},"Grade:",-1)),m(" "+s(t(u).output_grade??"-"),1)])):c("",!0),w.fields.includes("ukuran")?(l(),r("div",ee,[o[16]||(o[16]=e("span",{class:"font-medium"},"Ukuran:",-1)),m(" "+s(t(u).output_ukuran??"-"),1)])):c("",!0),e("div",null,[o[17]||(o[17]=e("span",{class:"font-medium"},"Notes:",-1)),m(" "+s(t(u).keterangan??"-"),1)])])])])]),_:1}),i(nt,null,{default:p(()=>[i(st,null,{default:p(()=>[m(s(t(a)("app.cancel")),1)]),_:1}),i(ot,{class:"bg-blue-600 hover:bg-blue-700 text-white",onClick:T},{default:p(()=>[m(s(t(a)("app.update")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{ce as default};
