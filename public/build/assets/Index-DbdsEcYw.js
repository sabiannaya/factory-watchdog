import{d as K,f as b,g as m,B as d,c as x,m as n,u as e,p as O,w as c,a as o,t as i,z as w,L as S,o as _,F as k,i as $,e as C}from"./app-i1_2c9TI.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWREGGXY.js";import{_ as R}from"./DataTable.vue_vue_type_script_setup_true_lang-D5Bbd2Ot.js";import{u as W,_ as L,a as j,b as F,d as D}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B0bB4Y56.js";import{C as B}from"./chevron-down-C8FjIUWp.js";import"./VisuallyHidden-CgfYLdxu.js";import"./index-C4J_hXM0.js";import"./x-T-BkQ4N0.js";import"./Input.vue_vue_type_script_setup_true_lang-mGQONf2a.js";import"./Spinner.vue_vue_type_script_setup_true_lang-Ca7klY01.js";import"./search-BWjjXBCD.js";const X={class:"p-4 space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"text-2xl font-semibold"},ee={class:"text-sm text-muted-foreground"},te={class:"flex items-center gap-3 mb-3 flex-wrap"},ae={class:"flex items-center gap-2"},oe={class:"text-sm font-medium"},le=["disabled"],se=["disabled"],re=["onClick"],ne={class:"flex items-center gap-2"},ie={class:"text-sm font-medium"},ue=["disabled"],ce=["disabled"],de=["onClick"],pe=["disabled"],me={class:"mt-4 flex items-center justify-end gap-2"},_e=["disabled"],fe=["disabled"],Le=K({__name:"Index",props:{hourlyLogs:{},meta:{}},setup(T){const{t:l}=W(),q=b(()=>[{title:l("logs.title"),href:"/logs"},{title:l("logs.hourly_logs"),href:"/logs"}]),u=m(!1),a=T,g=m(a.meta?.date_from?.split(" ")[0]??""),v=m(a.meta?.date_from?parseInt(a.meta.date_from.split(" ")[1]?.split(":")[0]||"0"):0),h=m(a.meta?.date_to?.split(" ")[0]??""),y=m(a.meta?.date_to?parseInt(a.meta.date_to.split(" ")[1]?.split(":")[0]||"23"):23),z=b(()=>a.hourlyLogs?.data??[]),f=Array.from({length:24},(t,s)=>({value:s,label:`${s.toString().padStart(2,"0")}:00`})),P=b(()=>f.find(t=>t.value===v.value)?.label??"00:00"),V=b(()=>f.find(t=>t.value===y.value)?.label??"23:00"),I=t=>{v.value=t},N=t=>{y.value=t},E=t=>{const s=a.meta?.per_page??20,r=a.meta?.sort??"recorded_at",p=a.meta?.direction??"desc";d.get(window.location.pathname,{q:t,per_page:s,sort:r,direction:p,date_from:a.meta?.date_from??null,date_to:a.meta?.date_to??null},{preserveState:!0,replace:!0})},H=({sort:t,direction:s})=>{const r=a.meta?.per_page??20,p=a.meta?.q??"";t&&d.get(window.location.pathname,{sort:t,direction:s??"desc",per_page:r,q:p,date_from:a.meta?.date_from??null,date_to:a.meta?.date_to??null},{preserveState:!0,replace:!0})},M=()=>{const t=a.hourlyLogs?.next_cursor;t&&d.get(window.location.pathname,{cursor:t},{preserveState:!0,replace:!0})},U=()=>{const t=a.hourlyLogs?.prev_cursor;t&&d.get(window.location.pathname,{cursor:t},{preserveState:!0,replace:!0})},A=(t,s)=>t?`${t} ${s.toString().padStart(2,"0")}:00:00`:null,G=(t,s)=>t?`${t} ${s.toString().padStart(2,"0")}:59:59`:null,J=()=>{const t=a.meta?.per_page??20,s=a.meta?.sort??"recorded_at",r=a.meta?.direction??"desc";d.get(window.location.pathname,{date_from:A(g.value||null,v.value),date_to:G(h.value||null,y.value),q:a.meta?.q??"",sort:s,direction:r,per_page:t},{preserveState:!0,replace:!0})};return d.on("start",()=>u.value=!0),d.on("finish",()=>u.value=!1),(t,s)=>(_(),x(k,null,[n(e(O),{title:e(l)("logs.hourly_logs")},null,8,["title"]),n(Q,{breadcrumbs:q.value},{default:c(()=>[o("div",X,[o("div",Y,[o("div",null,[o("h2",Z,i(e(l)("logs.hourly_logs_title")),1),o("p",ee,i(e(l)("logs.hourly_logs_description")),1)])]),o("div",te,[o("div",ae,[o("label",oe,i(e(l)("app.from")),1),w(o("input",{type:"date",class:"input","onUpdate:modelValue":s[0]||(s[0]=r=>g.value=r),disabled:u.value},null,8,le),[[S,g.value]]),n(e(L),null,{default:c(()=>[n(e(j),{"as-child":!0},{default:c(()=>[o("button",{type:"button",class:"input flex items-center justify-between",disabled:u.value},[o("span",null,i(P.value),1),n(e(B),{class:"ml-2 size-4"})],8,se)]),_:1}),n(e(F),{class:"min-w-[8rem]"},{default:c(()=>[(_(!0),x(k,null,$(e(f),r=>(_(),C(e(D),{"as-child":!0,key:r.value},{default:c(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:p=>I(r.value)},i(r.label),9,re)]),_:2},1024))),128))]),_:1})]),_:1})]),o("div",ne,[o("label",ie,i(e(l)("app.to")),1),w(o("input",{type:"date",class:"input","onUpdate:modelValue":s[1]||(s[1]=r=>h.value=r),disabled:u.value},null,8,ue),[[S,h.value]]),n(e(L),null,{default:c(()=>[n(e(j),{"as-child":!0},{default:c(()=>[o("button",{type:"button",class:"input flex items-center justify-between",disabled:u.value},[o("span",null,i(V.value),1),n(e(B),{class:"ml-2 size-4"})],8,ce)]),_:1}),n(e(F),{class:"min-w-[8rem]"},{default:c(()=>[(_(!0),x(k,null,$(e(f),r=>(_(),C(e(D),{"as-child":!0,key:r.value},{default:c(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:p=>N(r.value)},i(r.label),9,de)]),_:2},1024))),128))]),_:1})]),_:1})]),o("button",{class:"hover:cursor-pointer btn",onClick:J,disabled:u.value},i(e(l)("app.apply")),9,pe)]),n(R,{serverMode:"",data:z.value,columns:[{key:"hourly_log_id",label:e(l)("app.id"),type:"number",sortable:!0,findable:!1},{key:"production_name",label:e(l)("logs.production"),type:"string",sortable:!1,findable:!0},{key:"machine_group",label:e(l)("logs.machine_group"),type:"string",sortable:!1,findable:!0},{key:"recorded_at",label:e(l)("logs.recorded_at"),type:"string",sortable:!0,findable:!0},{key:"output_normal",label:e(l)("logs.output_normal"),type:"number",sortable:!0,findable:!1},{key:"target_normal",label:e(l)("logs.target_normal"),type:"number",sortable:!0,findable:!1},{key:"output_reject",label:e(l)("logs.output_reject"),type:"number",sortable:!0,findable:!1},{key:"target_reject",label:e(l)("logs.target_reject"),type:"number",sortable:!0,findable:!1},{key:"variance_normal",label:e(l)("logs.variance_normal"),type:"number",sortable:!1,findable:!1}],"per-page":20,"initial-sort":a.meta?.sort??"recorded_at","initial-direction":a.meta?.direction==="asc"?"asc":"desc",loading:u.value,onServerSearch:E,onServerSort:H},null,8,["data","columns","initial-sort","initial-direction","loading"]),o("div",me,[o("button",{class:"hover:cursor-pointer btn",disabled:!a.hourlyLogs?.prev_cursor||u.value,onClick:U},i(e(l)("app.previous")),9,_e),o("button",{class:"hover:cursor-pointer btn",disabled:!a.hourlyLogs?.next_cursor||u.value,onClick:M},i(e(l)("app.next")),9,fe)])])]),_:1},8,["breadcrumbs"])],64))}});export{Le as default};
