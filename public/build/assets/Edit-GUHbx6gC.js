import{d as h,f as b,v,g as G,l as y,c as w,m,u as e,p as x,w as $,a as n,t as r,y as C,B as p,F as V,o as B}from"./app-i1_2c9TI.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWREGGXY.js";import{_ as k,a as F}from"./InputConfigEditor.vue_vue_type_script_setup_true_lang-CoWg8l6I.js";import{u as q}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B0bB4Y56.js";import"./VisuallyHidden-CgfYLdxu.js";import"./index-C4J_hXM0.js";import"./x-T-BkQ4N0.js";const E={class:"p-4"},M={class:"rounded-xl border border-sidebar-border/70 p-6"},N={class:"text-lg font-semibold"},z={class:"mt-2 text-sm text-muted-foreground"},D={class:"flex items-center gap-3"},I=["disabled"],O=h({__name:"Edit",props:{machineGroup:{}},setup(l){const{t}=q(),a=l,_=b(()=>[{title:t("data_management.data_management"),href:"/data-management/production"},{title:t("data_management.machines"),href:"/data-management/machine"},{title:a.machineGroup?.name??t("data_management.edit"),href:window.location.pathname}]),u={type:"qty_only",fields:["qty"],grade_types:[]},o=v({name:a.machineGroup.name,description:a.machineGroup.description||"",input_config:a.machineGroup.input_config||u}),i=G(a.machineGroup.input_config||u);y(()=>{a.machineGroup.input_config&&(i.value=a.machineGroup.input_config,o.input_config=a.machineGroup.input_config)});function f(c){i.value=c,o.input_config=c}function g(){o.put(`/data-management/machine/${a.machineGroup.machine_group_id}`,{preserveState:!1,onSuccess:()=>{p.get("/data-management/machine")}})}return(c,s)=>(B(),w(V,null,[m(e(x),{title:`${e(t)("data_management.edit_machine")} â€” ${a.machineGroup.name}`},null,8,["title"]),m(S,{breadcrumbs:_.value},{default:$(()=>[n("div",E,[n("div",M,[n("h2",N,r(e(t)("data_management.edit_machine")),1),n("p",z,r(e(t)("data_management.edit_machine_description")),1),n("form",{onSubmit:C(g,["prevent"]),class:"mt-6 space-y-6"},[m(k,{form:e(o)},null,8,["form"]),m(F,{modelValue:i.value,"onUpdate:modelValue":[s[0]||(s[0]=d=>i.value=d),f],"show-preview":!0,"show-errors":!0,"error-message":e(o).errors.input_config},null,8,["modelValue","error-message"]),n("div",D,[n("button",{type:"submit",class:"hover:cursor-pointer btn",disabled:e(o).processing},r(e(o).processing?e(t)("data_management.saving"):e(t)("data_management.save_changes")),9,I),n("button",{type:"button",class:"btn btn-ghost",onClick:s[1]||(s[1]=d=>e(p).get("/data-management/machine"))},r(e(t)("data_management.cancel")),1)])],32)])])]),_:1},8,["breadcrumbs"])],64))}});export{O as default};
