import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-Bolxw2JV.js";import{_ as T}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrUmFdxY.js";import{_ as O}from"./Spinner.vue_vue_type_script_setup_true_lang-BLCXa5KB.js";import{S as Q}from"./search-DqEYQ3zn.js";import{c as L}from"./createLucideIcon-Bc86gjbu.js";import{d as Y,g as b,x as I,f as k,c as d,a as l,b as _,m as x,e as $,u as f,F as D,i as C,t as v,w as A,q as M,o as n,n as B,r as G,J as H}from"./app-BRuhaguS.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=L("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=L("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=L("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Z={class:"space-y-4"},K={class:"flex items-center gap-2"},ee={class:"relative flex-1"},te={class:"rounded-md border overflow-x-auto"},ae={class:"min-w-full divide-y divide-sidebar-border/70"},re={class:"bg-background"},se=["onClick"],oe={class:"flex items-center gap-2"},le={class:"bg-card"},ne={key:0},ie=["colspan"],ue={key:0,class:"flex items-center justify-between px-2"},de={class:"text-sm text-muted-foreground"},ce={class:"flex items-center gap-2"},fe={class:"text-sm"},xe=Y({__name:"DataTable",props:{data:{},columns:{},perPage:{default:10},serverMode:{type:Boolean,default:!1},initialSort:{default:null},initialDirection:{default:"asc"},loading:{type:Boolean,default:!1}},emits:["server-search","server-sort"],setup(p,{emit:q}){const t=p,N=t.perPage,g=b("");let w=null;const V=q,i=b(t.initialSort??null),c=b(t.initialDirection??"asc");I(()=>t.initialSort,e=>{i.value=e??null}),I(()=>t.initialDirection,e=>{c.value=e??"asc"});const u=b(1),z=e=>{t.loading||(i.value===e?c.value=c.value==="asc"?"desc":"asc":(i.value=e,c.value="asc"),t.serverMode&&V("server-sort",{sort:i.value,direction:c.value}))},h=k(()=>{if(t.serverMode||!g.value.trim())return t.data;const e=g.value.toLowerCase();return t.data.filter(r=>t.columns.some(a=>{if(a.findable===!1)return!1;const o=r[a.key];if(o==null)return!1;if(a.type==="date"){const s=new Date(o);return isNaN(s.getTime())?String(o).toLowerCase().includes(e):!!(s.toISOString().toLowerCase().includes(e)||s.toLocaleDateString().toLowerCase().includes(e)||s.toLocaleString().toLowerCase().includes(e)||String(s.getTime()).includes(e))}return String(o).toLowerCase().includes(e)}))}),y=k(()=>{if(t.serverMode||!i.value)return h.value;const e=t.columns.find(r=>r.key===i.value);return!e||e.sortable===!1?h.value:[...h.value].sort((r,a)=>{const o=r[i.value],s=a[i.value];if(o==null&&s==null)return 0;if(o==null)return 1;if(s==null)return-1;let m=0;return e.type==="number"?m=Number(o)-Number(s):e.type==="date"?m=new Date(o).getTime()-new Date(s).getTime():m=String(o).localeCompare(String(s)),c.value==="asc"?m:-m})}),P=k(()=>{if(t.serverMode)return t.data;const e=(u.value-1)*t.perPage,r=e+t.perPage;return y.value.slice(e,r)}),S=k(()=>t.serverMode?1:Math.ceil(y.value.length/t.perPage)),U=()=>{u.value=1},j=()=>{U(),t.serverMode&&(w&&clearTimeout(w),w=setTimeout(()=>{V("server-search",g.value)},300))},F=(e,r)=>{if(e==null)return"-";switch(r){case"number":return Number(e).toLocaleString();case"date":return new Date(e).toLocaleDateString();case"boolean":return e?"Yes":"No";default:return String(e)}},E=e=>i.value===e?c.value==="asc"?X:R:W;return(e,r)=>(n(),d("div",Z,[l("div",K,[l("div",ee,[x(f(Q),{class:"absolute left-2 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),x(f(J),{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=a=>g.value=a),placeholder:"Search...",class:"pl-8",onInput:j,disabled:t.loading},null,8,["modelValue","disabled"]),t.loading?(n(),$(f(O),{key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground"})):_("",!0)])]),l("div",te,[l("table",ae,[l("thead",re,[l("tr",null,[(n(!0),d(D,null,C(p.columns,a=>(n(),d("th",{key:a.key,scope:"col",class:B(["px-4 py-3 text-left text-sm font-medium text-sidebar-foreground/80",a.sortable!==!1&&!t.loading?"cursor-pointer select-none":""]),onClick:o=>a.sortable!==!1&&!t.loading?z(a.key):null},[l("div",oe,[l("span",null,v(a.label),1),a.sortable!==!1?(n(),$(G(E(a.key)),{key:0,class:B(["size-4",[i.value===a.key?"text-foreground":"text-muted-foreground"]])},null,8,["class"])):_("",!0)])],10,se))),128))])]),l("tbody",le,[P.value.length===0?(n(),d("tr",ne,[l("td",{colspan:p.columns.length,class:"h-24 text-center text-sm text-muted-foreground"}," No results found. ",8,ie)])):_("",!0),(n(!0),d(D,null,C(P.value,(a,o)=>(n(),d("tr",{key:o,class:"odd:bg-transparent even:bg-sidebar-border/5"},[(n(!0),d(D,null,C(p.columns,s=>(n(),d("td",{key:s.key,class:"px-4 py-3 text-sm"},[H(e.$slots,"cell",{row:a,column:s},()=>[M(v(F(a[s.key],s.type)),1)])]))),128))]))),128))])])]),!t.serverMode&&S.value>1?(n(),d("div",ue,[l("div",de," Showing "+v((u.value-1)*f(N)+1)+" to "+v(Math.min(u.value*f(N),y.value.length))+" of "+v(y.value.length)+" results ",1),l("div",ce,[x(f(T),{variant:"outline",size:"sm",disabled:u.value===1,onClick:r[1]||(r[1]=a=>u.value--)},{default:A(()=>[...r[3]||(r[3]=[M(" Previous ",-1)])]),_:1},8,["disabled"]),l("div",fe," Page "+v(u.value)+" of "+v(S.value),1),x(f(T),{variant:"outline",size:"sm",disabled:u.value===S.value,onClick:r[2]||(r[2]=a=>u.value++)},{default:A(()=>[...r[4]||(r[4]=[M(" Next ",-1)])]),_:1},8,["disabled"])])])):_("",!0)]))}});export{xe as _};
