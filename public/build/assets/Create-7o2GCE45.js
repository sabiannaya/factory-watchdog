import{d as O,f as x,g as C,a2 as P,x as D,v as T,e as N,w as p,m as g,a as e,u as a,p as I,t as s,y as A,c as u,b as k,q as $,o as l,F as V,i as U,z as v,L as y,n as H,N as J,B as S}from"./app-i1_2c9TI.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-UWREGGXY.js";import{u as Q,_ as R,a as W,b as X,d as j}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B0bB4Y56.js";import{C as Y}from"./chevron-down-C8FjIUWp.js";import"./VisuallyHidden-CgfYLdxu.js";import"./index-C4J_hXM0.js";import"./x-T-BkQ4N0.js";const Z={class:"p-4 space-y-4"},ee={class:"text-3xl font-bold"},te={class:"text-muted-foreground dark:text-muted-foreground"},ae={class:"rounded-lg border border-sidebar-border/70 dark:border-sidebar-border/70 bg-card dark:bg-card p-6"},oe={class:"text-lg font-semibold mb-4"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"block text-sm font-medium mb-2"},de={type:"button",class:"input w-full flex items-center justify-between",required:""},re={class:"truncate"},le=["onClick"],ue={class:"block text-sm font-medium mb-2"},ie={key:0,class:"text-center py-12 rounded-lg border border-dashed border-sidebar-border/70 dark:border-sidebar-border/70 bg-muted/20 dark:bg-muted/20"},ce={class:"text-muted-foreground dark:text-muted-foreground"},_e={key:1,class:"space-y-6"},me={class:"p-4 border-b border-sidebar-border/40 flex items-center justify-between"},pe={class:"text-xl font-bold"},ge={class:"text-sm text-muted-foreground dark:text-muted-foreground mt-1"},be={key:0,class:"mx-2"},he={key:1},ve={class:"flex items-center gap-3"},fe={class:"text-sm px-3 py-1 rounded-full bg-muted/60 dark:bg-muted/60"},xe=["onClick"],ke={class:"p-6"},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},we={class:"font-semibold text-base"},Ce={class:"block text-sm font-medium mb-1.5"},$e=["onUpdate:modelValue","placeholder"],Ve={class:"text-xs text-muted-foreground dark:text-muted-foreground mt-1"},Ue={class:"block text-sm font-medium mb-1.5"},Ge=["onUpdate:modelValue","placeholder"],Be={class:"block text-sm font-medium mb-1.5"},De=["onUpdate:modelValue","placeholder"],Ne={key:2,class:"text-center py-12 rounded-lg border border-dashed border-sidebar-border/70 dark:border-sidebar-border/70 bg-muted/20 dark:bg-muted/20"},Se={class:"text-muted-foreground dark:text-muted-foreground"},je={key:3,class:"flex items-center gap-3 pt-4"},ze=["disabled"],Te=O({__name:"Create",props:{productions:{}},setup(G){const{t:o}=Q(),z=x(()=>[{title:o("data_management.data_management"),href:"/data-management/production"},{title:o("data_management.targets"),href:"/data-management/targets"},{title:o("data_management.create"),href:window.location.pathname}]),w=G,i=C(null),b=C(new Date().toISOString().split("T")[0]),L=x(()=>{if(!i.value)return`-- ${o("data_management.choose_production")} --`;const d=w.productions.find(n=>n.production_id===i.value);return d?d.production_name:`-- ${o("data_management.choose_production")} --`}),B=d=>{i.value=d},E=x(()=>w.productions.find(d=>d.production_id===i.value)),f=x(()=>E.value?.machine_groups??[]),h=P({});D(f,d=>{d.forEach(n=>{h[n.production_machine_group_id]=!0})},{immediate:!0});function F(d){h[d]=!h[d]}const c=C({});D(i,d=>{if(!d){c.value={};return}const n=w.productions.find(r=>r.production_id===d);if(!n)return;const t={};n.machine_groups.forEach(r=>{t[r.production_machine_group_id]={},r.fields.forEach(_=>{t[r.production_machine_group_id][_]={field_name:_,target_value:r.default_targets[_]??null,actual_value:null,keterangan:null}})}),c.value=t});const m=T({production_id:null,date:b.value,machine_groups:[]});function q(){if(!i.value){alert(o("data_management.please_select_production"));return}m.production_id=i.value,m.date=b.value,m.machine_groups=Object.entries(c.value).map(([d,n])=>({production_machine_group_id:Number(d),values:Object.values(n)})),m.post("/data-management/targets",{onSuccess:()=>{S.get(`/data-management/targets?production_id=${i.value}&date=${b.value}`)}})}function M(d){return d.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}return(d,n)=>(l(),N(K,{breadcrumbs:z.value},{default:p(()=>[g(a(I),{title:a(o)("data_management.create_daily_targets")},null,8,["title"]),e("div",Z,[e("div",null,[e("h1",ee,s(a(o)("data_management.create_daily_targets")),1),e("p",te,s(a(o)("data_management.set_target_values_description")),1)]),e("form",{onSubmit:A(q,["prevent"]),class:"space-y-6"},[e("div",ae,[e("h2",oe,s(a(o)("data_management.production_and_date")),1),e("div",ne,[e("div",null,[e("label",se,[$(s(a(o)("data_management.select_production"))+" ",1),n[3]||(n[3]=e("span",{class:"text-red-500"},"*",-1))]),g(a(R),null,{default:p(()=>[g(a(W),{"as-child":!0},{default:p(()=>[e("button",de,[e("span",re,s(L.value),1),g(a(Y),{class:"ml-2 size-4"})])]),_:1}),g(a(X),{class:"min-w-[12rem]"},{default:p(()=>[g(a(j),{"as-child":!0},{default:p(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:n[0]||(n[0]=t=>B(null))},"-- "+s(a(o)("data_management.choose_production"))+" --",1)]),_:1}),(l(!0),u(V,null,U(G.productions,t=>(l(),N(a(j),{key:t.production_id,"as-child":!0},{default:p(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:r=>B(t.production_id)},s(t.production_name),9,le)]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",null,[e("label",ue,[$(s(a(o)("data_management.target_date"))+" ",1),n[4]||(n[4]=e("span",{class:"text-red-500"},"*",-1))]),v(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>b.value=t),type:"date",required:"",class:"input w-full"},null,512),[[y,b.value]])])])]),i.value?f.value.length>0?(l(),u("div",_e,[(l(!0),u(V,null,U(f.value,t=>(l(),u("div",{key:t.production_machine_group_id,class:"rounded-lg border border-sidebar-border/70 dark:border-sidebar-border/70 bg-card dark:bg-card"},[e("div",me,[e("div",null,[e("h3",pe,s(t.name),1),e("p",ge,[$(s(t.machineGroup.name)+" ",1),t.machineGroup.description?(l(),u("span",be,"â€¢")):k("",!0),t.machineGroup.description?(l(),u("span",he,s(t.machineGroup.description),1)):k("",!0)])]),e("div",ve,[e("span",fe,s(t.machine_count)+" "+s(a(o)("data_management.machines")),1),e("button",{type:"button",class:"btn btn-ghost",onClick:r=>F(t.production_machine_group_id)},[(l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",class:H(["h-4 w-4 transition-transform",{"rotate-180":!h[t.production_machine_group_id]}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...n[5]||(n[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,xe)])]),v(e("div",ke,[e("div",ye,[(l(!0),u(V,null,U(t.fields,r=>(l(),u("div",{key:`${t.production_machine_group_id}-${r}`,class:"rounded-lg bg-muted/40 dark:bg-muted/40 p-4 space-y-3"},[e("h4",we,s(M(r)),1),e("div",null,[e("label",Ce,s(a(o)("data_management.target_value")),1),v(e("input",{"onUpdate:modelValue":_=>c.value[t.production_machine_group_id][r].target_value=_,type:"number",min:"0",placeholder:a(o)("data_management.enter_target"),class:"input w-full"},null,8,$e),[[y,c.value[t.production_machine_group_id][r].target_value,void 0,{number:!0}]]),e("p",Ve,s(a(o)("data_management.default"))+": "+s(t.default_targets[r]??a(o)("data_management.none")),1)]),e("div",null,[e("label",Ue,s(a(o)("data_management.actual_output")),1),v(e("input",{"onUpdate:modelValue":_=>c.value[t.production_machine_group_id][r].actual_value=_,type:"number",min:"0",placeholder:a(o)("data_management.enter_actual"),class:"input w-full"},null,8,Ge),[[y,c.value[t.production_machine_group_id][r].actual_value,void 0,{number:!0}]])]),e("div",null,[e("label",Be,s(a(o)("data_management.notes")),1),v(e("textarea",{"onUpdate:modelValue":_=>c.value[t.production_machine_group_id][r].keterangan=_,placeholder:a(o)("data_management.optional_notes"),rows:"2",class:"input w-full resize-none"},null,8,De),[[y,c.value[t.production_machine_group_id][r].keterangan]])])]))),128))])],512),[[J,h[t.production_machine_group_id]]])]))),128))])):i.value?(l(),u("div",Ne,[e("p",Se,s(a(o)("data_management.no_machine_groups_found")),1)])):k("",!0):(l(),u("div",ie,[e("p",ce,s(a(o)("data_management.please_select_production_to_configure")),1)])),i.value&&f.value.length>0?(l(),u("div",je,[e("button",{type:"submit",class:"hover:cursor-pointer btn",disabled:a(m).processing},s(a(m).processing?a(o)("data_management.saving"):a(o)("data_management.save_daily_targets")),9,ze),e("button",{type:"button",class:"btn btn-ghost",onClick:n[2]||(n[2]=t=>a(S).get("/data-management/targets"))},s(a(o)("data_management.cancel")),1)])):k("",!0)],32)])]),_:1},8,["breadcrumbs"]))}});export{Te as default};
