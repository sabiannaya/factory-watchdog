import{d as w,r as u,J as n,c as T,k as p,u as c,l as C,m as D,a as o,H as m,I as g,F,o as V}from"./app-DE6ow1Ix.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-bEXc6-g0.js";import{_ as L}from"./DataTable.vue_vue_type_script_setup_true_lang-Fqdyk_tW.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bir4mPS3.js";import"./index-D65DViVt.js";import"./VisuallyHidden-CBitG6WX.js";import"./useForwardExpose-e7sykY-9.js";import"./useForwardPropsEmits-BPFUmVRI.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-CIZlwMSZ.js";import"./Input.vue_vue_type_script_setup_true_lang-BVF7sYGf.js";import"./Spinner.vue_vue_type_script_setup_true_lang-DhzhD5qF.js";import"./search-CWSLdkfT.js";const N={class:"p-4 space-y-4"},$={class:"flex items-center gap-3 mb-3"},B=["disabled"],M=["disabled"],E=["disabled"],H={class:"mt-4 flex items-center justify-end gap-2"},U=["disabled"],j=["disabled"],ee=w({__name:"ProductionLogs",props:{logs:{},meta:{}},setup(f){const b=[{title:"Data Management",href:"/data-management/production"},{title:"Production Logs",href:"/data-management/logs/production"}],t=f,s=u(!1),l=u(t.meta?.date_from??""),i=u(t.meta?.date_to??""),_=t.logs?.data??[],v=e=>{const a=t.meta?.per_page??20,r=t.meta?.sort??"recorded_hour",d=t.meta?.direction??"desc";n.get(window.location.pathname,{q:e,per_page:a,sort:r,direction:d},{preserveState:!0,replace:!0})},x=({sort:e,direction:a})=>{const r=t.meta?.per_page??20,d=t.meta?.q??"";e&&n.get(window.location.pathname,{sort:e,direction:a??"desc",per_page:r,q:d},{preserveState:!0,replace:!0})},y=e=>e?e.includes("T")?e.replace("T"," ")+":00":`${e} 00:00:00`:null,h=e=>e?e.includes("T")?e.replace("T"," ")+":00":`${e} 23:59:59`:null,S=()=>{const e=t.meta?.per_page??20,a=t.meta?.sort??"recorded_hour",r=t.meta?.direction??"desc";n.get(window.location.pathname,{date_from:y(l.value||null),date_to:h(i.value||null),q:t.meta?.q??"",sort:a,direction:r,per_page:e},{preserveState:!0,replace:!0})},k=()=>{const e=t.logs?.next_page;e&&n.visit(e,{preserveState:!0,replace:!0})},P=()=>{const e=t.logs?.prev_page;e&&n.visit(e,{preserveState:!0,replace:!0})};return n.on("start",()=>s.value=!0),n.on("finish",()=>s.value=!1),(e,a)=>(V(),T(F,null,[p(c(C),{title:"Production Logs"}),p(q,{breadcrumbs:b},{default:D(()=>[o("div",N,[a[4]||(a[4]=o("h2",{class:"text-2xl font-semibold"},"Production Logs (hourly)",-1)),a[5]||(a[5]=o("p",{class:"text-sm text-muted-foreground"},"Sums per production per hour",-1)),o("div",$,[a[2]||(a[2]=o("label",{class:"text-sm"},"From",-1)),m(o("input",{type:"datetime-local",class:"input","onUpdate:modelValue":a[0]||(a[0]=r=>l.value=r),disabled:s.value},null,8,B),[[g,l.value]]),a[3]||(a[3]=o("label",{class:"text-sm"},"To",-1)),m(o("input",{type:"datetime-local",class:"input","onUpdate:modelValue":a[1]||(a[1]=r=>i.value=r),disabled:s.value},null,8,M),[[g,i.value]]),o("button",{class:"btn",onClick:S,disabled:s.value},"Apply",8,E)]),p(L,{serverMode:"",data:c(_),columns:[{key:"recorded_hour",label:"Hour",type:"string",sortable:!0,findable:!1},{key:"production_name",label:"Production",type:"string",sortable:!0,findable:!0},{key:"total_target",label:"Target",type:"number",sortable:!0,findable:!1},{key:"total_output",label:"Output",type:"number",sortable:!0,findable:!1},{key:"variance",label:"Variance",type:"number",sortable:!1,findable:!1}],"per-page":20,"initial-sort":t.meta?.sort??"recorded_hour","initial-direction":t.meta?.direction??"desc",loading:s.value,onServerSearch:v,onServerSort:x},null,8,["data","initial-sort","initial-direction","loading"]),o("div",H,[o("button",{class:"btn",disabled:!t.logs?.prev_page||s.value,onClick:P},"Previous",8,U),o("button",{class:"btn",disabled:!t.logs?.next_page||s.value,onClick:k},"Next",8,j)])])]),_:1})],64))}});export{ee as default};
