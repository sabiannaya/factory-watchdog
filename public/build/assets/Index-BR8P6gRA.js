import{d as $,r as x,w as N,J as P,p as B,m as _,k as b,a as t,u as f,l as C,c as a,b as k,H as y,o as d,F as h,h as v,t as n,L as M,I as S,s as w,q as D}from"./app-ue20rSb4.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_szTgFs.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C7b_Quob.js";import"./index-Cl--hQqE.js";import"./VisuallyHidden-DjuZqZTT.js";import"./useForwardExpose-BCEiolqJ.js";import"./useForwardPropsEmits-BgPdB8_u.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-COama0qN.js";const F={class:"p-4 space-y-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},j=["value"],E={key:0,class:"text-center py-12 rounded-lg border border-dashed border-sidebar-border/70 dark:border-sidebar-border/70 bg-muted/20 dark:bg-muted/20"},H={key:1,class:"space-y-6"},L={class:"flex justify-between items-start mb-6"},U={class:"text-xl font-bold"},q={class:"text-sm text-muted-foreground dark:text-muted-foreground mt-1"},z={class:"space-y-4"},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},R={class:"text-sm font-medium mb-1 capitalize"},A={class:"text-lg font-semibold"},K={class:"text-xs text-muted-foreground dark:text-muted-foreground mt-1"},O={key:0,class:"text-xs text-muted-foreground dark:text-muted-foreground mt-2 italic"},Q={class:"pt-3 border-t border-sidebar-border/40"},W={key:2,class:"text-center py-12 rounded-lg border border-dashed border-sidebar-border/70 dark:border-sidebar-border/70 bg-muted/20 dark:bg-muted/20"},se=$({__name:"Index",props:{productions:{},machineGroups:{},selectedProductionId:{},selectedDate:{}},setup(i){const G=[{title:"Data Management",href:"/data-management/production"},{title:"Targets",href:"/data-management/targets"}],c=i,u=x(c.selectedProductionId),l=x(c.selectedDate);N([u,l],([s,e])=>{s&&P.get("/data-management/targets",{production_id:s,date:e},{preserveState:!0,replace:!0})},{immediate:!1});const m=(s,e,r)=>{const o=c.machineGroups?.find(g=>g.production_machine_group_id===s);if(!o)return null;const p=o.daily_values.find(g=>g.field_name===e);return p?r==="target"?p.target_value:p.keterangan:r==="target"?o.default_targets[e]??null:null},V=(s,e)=>c.machineGroups?.find(o=>o.production_machine_group_id===s)?.default_targets[e]??null;return(s,e)=>(d(),B(T,{breadcrumbs:G},{default:_(()=>[b(f(C),{title:"Targets Management"}),t("div",F,[t("div",I,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium mb-2"},"Select Production",-1)),y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>u.value=r),class:"input w-full"},[e[2]||(e[2]=t("option",{value:null},"-- Choose Production --",-1)),(d(!0),a(h,null,v(i.productions,r=>(d(),a("option",{key:r.production_id,value:r.production_id},n(r.production_name),9,j))),128))],512),[[M,u.value,void 0,{number:!0}]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium mb-2"},"Select Date",-1)),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r),type:"date",class:"input w-full"},null,512),[[S,l.value]])])]),u.value?i.machineGroups&&i.machineGroups.length>0?(d(),a("div",H,[(d(!0),a(h,null,v(i.machineGroups,r=>(d(),a("div",{key:r.production_machine_group_id,class:"rounded-lg border border-sidebar-border/70 dark:border-sidebar-border/70 bg-card dark:bg-card p-6"},[t("div",L,[t("div",null,[t("h2",U,n(r.name),1),t("p",q,n(r.machine_count)+" machines ",1)]),b(f(w),{href:`/data-management/targets/${r.production_machine_group_id}/edit?date=${l.value}`,class:"btn btn-ghost"},{default:_(()=>[...e[6]||(e[6]=[D(" Edit ",-1)])]),_:1},8,["href"])]),t("div",z,[t("div",J,[(d(!0),a(h,null,v(r.fields,o=>(d(),a("div",{key:`${r.production_machine_group_id}-target-${o}`,class:"rounded-lg bg-muted/40 dark:bg-muted/40 p-3"},[t("p",R,n(o.replace(/_/g," ")),1),t("p",A,n(m(r.production_machine_group_id,o,"target")??"Not set"),1),t("p",K," Default: "+n(V(r.production_machine_group_id,o)??"No default"),1),m(r.production_machine_group_id,o,"keterangan")?(d(),a("p",O,n(m(r.production_machine_group_id,o,"keterangan")),1)):k("",!0)]))),128))]),t("div",Q,[b(f(w),{href:`/input/create?date=${l.value}&production_id=${u.value}`,class:"text-sm text-primary hover:underline inline-flex items-center gap-1"},{default:_(()=>[...e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),D(" Record hourly output ",-1)])]),_:1},8,["href"])])])]))),128))])):u.value&&i.machineGroups?(d(),a("div",W,[...e[8]||(e[8]=[t("p",{class:"text-muted-foreground dark:text-muted-foreground"},"No machine groups found for this production",-1)])])):k("",!0):(d(),a("div",E,[...e[5]||(e[5]=[t("p",{class:"text-muted-foreground dark:text-muted-foreground"},"Please select a production to view machine groups",-1)])]))])]),_:1}))}});export{se as default};
