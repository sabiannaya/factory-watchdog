import{a as M,b as H,c as T,d as b,_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-BSta2Xg1.js";import{d as j,f as k,g as y,l as F,B as n,O as z,c as v,m as i,u as s,p as L,w as c,a,t as h,o as g,F as w,q as O}from"./app-BRuhaguS.js";import{_ as U}from"./DataTable.vue_vue_type_script_setup_true_lang-BGxGevKE.js";import{_ as x,P as G}from"./IconActionButton.vue_vue_type_script_setup_true_lang-DuEfKw9g.js";import{C as J}from"./chevron-down-Bi0ueEnd.js";import{E as K}from"./eye-DwXBrb9R.js";import{T as Q}from"./trash-2-D_TNeSzz.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrUmFdxY.js";import"./Presence-CRPloLVK.js";import"./createLucideIcon-Bc86gjbu.js";import"./useForwardPropsEmits-CxMGla6T.js";import"./x-Dz_x2_zF.js";import"./VisuallyHidden-gDrgz296.js";import"./index-C4J_hXM0.js";import"./Input.vue_vue_type_script_setup_true_lang-Bolxw2JV.js";import"./Spinner.vue_vue_type_script_setup_true_lang-BLCXa5KB.js";import"./search-DqEYQ3zn.js";const R={class:"p-4 space-y-4"},W={class:"flex items-center justify-between"},X={class:"flex items-center gap-3 mb-2"},Y=["disabled"],Z={key:1,class:"flex items-center gap-4"},ee={class:"mt-4 flex items-center justify-end gap-2"},te=["disabled"],oe=["disabled"],ke=j({__name:"Index",props:{productions:{},meta:{}},setup(C){const S=[{title:"Data Management",href:"/data-management/production"},{title:"Production",href:"/data-management/production"}],$=[{key:"production_id",label:"ID",type:"number",sortable:!0,findable:!1},{key:"production_name",label:"Production Name",type:"string",sortable:!0,findable:!0},{key:"status",label:"Status",type:"string",sortable:!0,findable:!0},{key:"created_at",label:"Created",type:"date",sortable:!0,findable:!0},{key:"actions",label:"Actions",type:"string",sortable:!1,findable:!1}],t=C,P=k(()=>t.productions?.data??[]),u=y(!1),d=y(t.meta?.status??""),A=k(()=>d.value?d.value==="active"?"Active":d.value==="inactive"?"Inactive":"All":"All"),_=o=>{d.value=o,E()},D=o=>{const e=t.meta?.per_page??10,r=t.meta?.sort??"production_name",l=t.meta?.direction??"asc";n.get(window.location.pathname,{q:o,per_page:e,sort:r,direction:l},{preserveState:!0,replace:!0})},N=({sort:o,direction:e})=>{const r=t.meta?.per_page??10,l=t.meta?.q??"";o&&n.get(window.location.pathname,{sort:o,direction:e??"asc",per_page:r,q:l},{preserveState:!0,replace:!0})},q=()=>{const o=t.productions?.next_cursor;o&&n.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},B=()=>{const o=t.productions?.prev_cursor;o&&n.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},E=()=>{const o=t.meta?.per_page??10,e=t.meta?.q??"",r=t.meta?.sort??"production_name",l=t.meta?.direction??"asc";n.get(window.location.pathname,{status:d.value||null,q:e,sort:r,direction:l,per_page:o},{preserveState:!0,replace:!0})};let p=null,m=null,f=null;F(()=>{p=()=>u.value=!0,m=()=>u.value=!1,f=()=>u.value=!1,n.on("start",p),n.on("finish",m),n.on("error",f)}),z(()=>{p&&n.on("start",p),m&&n.on("finish",m),f&&n.on("error",f)});const I=o=>{window.confirm("Are you sure you want to delete this production?")&&n.visit(`/data-management/production/${o}`,{method:"delete",preserveState:!1})};return(o,e)=>(g(),v(w,null,[i(s(L),{title:"Production"}),i(V,{breadcrumbs:S},{default:c(()=>[a("div",R,[a("div",W,[e[4]||(e[4]=a("div",null,[a("h2",{class:"text-2xl font-semibold"},"Production"),a("p",{class:"text-sm text-muted-foreground"},"Manage production records")],-1)),a("button",{class:"hover:cursor-pointer btn",onClick:e[0]||(e[0]=r=>s(n).get("/data-management/production/create"))}," Create Production ")]),a("div",X,[e[5]||(e[5]=a("label",{class:"text-sm"},"Status",-1)),i(s(M),null,{default:c(()=>[i(s(H),{"as-child":!0},{default:c(()=>[a("button",{type:"button",class:"appearance-none rounded-md border bg-popover text-popover-foreground px-3 py-2 pr-10 text-sm shadow-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 flex items-center gap-2",disabled:u.value},[a("span",null,h(A.value),1),i(s(J),{class:"ml-1 size-4"})],8,Y)]),_:1}),i(s(T),{class:"min-w-[8rem]"},{default:c(()=>[i(s(b),{"as-child":!0},{default:c(()=>[a("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:e[1]||(e[1]=r=>_(""))},"All")]),_:1}),i(s(b),{"as-child":!0},{default:c(()=>[a("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:e[2]||(e[2]=r=>_("active"))},"Active")]),_:1}),i(s(b),{"as-child":!0},{default:c(()=>[a("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:e[3]||(e[3]=r=>_("inactive"))},"Inactive")]),_:1})]),_:1})]),_:1})]),i(U,{serverMode:"",data:P.value,columns:$,"per-page":5,"initial-sort":t.meta?.sort??"production_name","initial-direction":t.meta?.direction==="desc"?"desc":"asc",loading:u.value,onServerSearch:D,onServerSort:N},{cell:c(({row:r,column:l})=>[l.key!=="actions"?(g(),v(w,{key:0},[O(h(r[l.key]),1)],64)):(g(),v("div",Z,[i(x,{icon:s(K),label:"Detail",color:"blue",onClick:()=>s(n).get(`/data-management/production/${r.production_id}`)},null,8,["icon","onClick"]),i(x,{icon:s(G),label:"Edit",color:"amber",onClick:()=>s(n).get(`/data-management/production/${r.production_id}/edit`)},null,8,["icon","onClick"]),i(x,{icon:s(Q),label:"Delete",color:"red",onClick:()=>I(r.production_id)},null,8,["icon","onClick"])]))]),_:1},8,["data","initial-sort","initial-direction","loading"]),a("div",ee,[a("button",{class:"hover:cursor-pointer btn",disabled:!t.productions?.prev_cursor,onClick:B},"Previous",8,te),a("button",{class:"hover:cursor-pointer btn",disabled:!t.productions?.next_cursor,onClick:q},"Next",8,oe)])])]),_:1})],64))}});export{ke as default};
