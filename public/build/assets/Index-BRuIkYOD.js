import{d as U,g as c,f as y,B as u,c as h,m as s,u as r,p as G,w as i,a as o,z as k,L as w,t as _,o as m,F as x,i as S,e as L}from"./app-D4NX6RtZ.js";import{a as $,b as C,c as j,d as F,_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNNNqqjX.js";import{_ as K}from"./DataTable.vue_vue_type_script_setup_true_lang-bzC7JgnF.js";import{C as T}from"./chevron-down-D-IdcPDr.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BzC2dvNG.js";import"./Presence-CsGVf8pY.js";import"./createLucideIcon-A0T1vukc.js";import"./useForwardPropsEmits-BmzqlngZ.js";import"./x-XD7JAbQb.js";import"./VisuallyHidden-BeURpiPp.js";import"./index-C4J_hXM0.js";import"./Input.vue_vue_type_script_setup_true_lang-BWEJuRad.js";import"./Spinner.vue_vue_type_script_setup_true_lang-BqsWXN44.js";import"./search-DA59VARU.js";const Q={class:"p-4 space-y-4"},W={class:"flex items-center gap-3 mb-3 flex-wrap"},X={class:"flex items-center gap-2"},Y=["disabled"],Z=["disabled"],ee=["onClick"],te={class:"flex items-center gap-2"},ae=["disabled"],oe=["disabled"],le=["onClick"],re=["disabled"],se={class:"mt-4 flex items-center justify-end gap-2"},ne=["disabled"],ie=["disabled"],we=U({__name:"Index",props:{hourlyLogs:{},meta:{}},setup(D){const N=[{title:"Logs",href:"/logs"},{title:"Hourly Logs",href:"/logs"}],n=c(!1),t=D,f=c(t.meta?.date_from?.split(" ")[0]??""),b=c(t.meta?.date_from?parseInt(t.meta.date_from.split(" ")[1]?.split(":")[0]||"0"):0),v=c(t.meta?.date_to?.split(" ")[0]??""),g=c(t.meta?.date_to?parseInt(t.meta.date_to.split(" ")[1]?.split(":")[0]||"23"):23),P=y(()=>t.hourlyLogs?.data??[]),p=Array.from({length:24},(e,a)=>({value:a,label:`${a.toString().padStart(2,"0")}:00`})),B=y(()=>p.find(e=>e.value===b.value)?.label??"00:00"),H=y(()=>p.find(e=>e.value===g.value)?.label??"23:00"),V=e=>{b.value=e},q=e=>{g.value=e},I=e=>{const a=t.meta?.per_page??20,l=t.meta?.sort??"recorded_at",d=t.meta?.direction??"desc";u.get(window.location.pathname,{q:e,per_page:a,sort:l,direction:d,date_from:t.meta?.date_from??null,date_to:t.meta?.date_to??null},{preserveState:!0,replace:!0})},R=({sort:e,direction:a})=>{const l=t.meta?.per_page??20,d=t.meta?.q??"";e&&u.get(window.location.pathname,{sort:e,direction:a??"desc",per_page:l,q:d,date_from:t.meta?.date_from??null,date_to:t.meta?.date_to??null},{preserveState:!0,replace:!0})},z=()=>{const e=t.hourlyLogs?.next_cursor;e&&u.get(window.location.pathname,{cursor:e},{preserveState:!0,replace:!0})},A=()=>{const e=t.hourlyLogs?.prev_cursor;e&&u.get(window.location.pathname,{cursor:e},{preserveState:!0,replace:!0})},M=(e,a)=>e?`${e} ${a.toString().padStart(2,"0")}:00:00`:null,E=(e,a)=>e?`${e} ${a.toString().padStart(2,"0")}:59:59`:null,O=()=>{const e=t.meta?.per_page??20,a=t.meta?.sort??"recorded_at",l=t.meta?.direction??"desc";u.get(window.location.pathname,{date_from:M(f.value||null,b.value),date_to:E(v.value||null,g.value),q:t.meta?.q??"",sort:a,direction:l,per_page:e},{preserveState:!0,replace:!0})};return u.on("start",()=>n.value=!0),u.on("finish",()=>n.value=!1),(e,a)=>(m(),h(x,null,[s(r(G),{title:"Hourly Logs"}),s(J,{breadcrumbs:N},{default:i(()=>[o("div",Q,[a[4]||(a[4]=o("div",{class:"flex items-center justify-between"},[o("div",null,[o("h2",{class:"text-2xl font-semibold"},"Hourly Production Logs"),o("p",{class:"text-sm text-muted-foreground"},"Real-time hourly output tracking per machine")])],-1)),o("div",W,[o("div",X,[a[2]||(a[2]=o("label",{class:"text-sm font-medium"},"From",-1)),k(o("input",{type:"date",class:"input","onUpdate:modelValue":a[0]||(a[0]=l=>f.value=l),disabled:n.value},null,8,Y),[[w,f.value]]),s(r($),null,{default:i(()=>[s(r(C),{"as-child":!0},{default:i(()=>[o("button",{type:"button",class:"input flex items-center justify-between",disabled:n.value},[o("span",null,_(B.value),1),s(r(T),{class:"ml-2 size-4"})],8,Z)]),_:1}),s(r(j),{class:"min-w-[8rem]"},{default:i(()=>[(m(!0),h(x,null,S(r(p),l=>(m(),L(r(F),{"as-child":!0,key:l.value},{default:i(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:d=>V(l.value)},_(l.label),9,ee)]),_:2},1024))),128))]),_:1})]),_:1})]),o("div",te,[a[3]||(a[3]=o("label",{class:"text-sm font-medium"},"To",-1)),k(o("input",{type:"date",class:"input","onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l),disabled:n.value},null,8,ae),[[w,v.value]]),s(r($),null,{default:i(()=>[s(r(C),{"as-child":!0},{default:i(()=>[o("button",{type:"button",class:"input flex items-center justify-between",disabled:n.value},[o("span",null,_(H.value),1),s(r(T),{class:"ml-2 size-4"})],8,oe)]),_:1}),s(r(j),{class:"min-w-[8rem]"},{default:i(()=>[(m(!0),h(x,null,S(r(p),l=>(m(),L(r(F),{"as-child":!0,key:l.value},{default:i(()=>[o("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:d=>q(l.value)},_(l.label),9,le)]),_:2},1024))),128))]),_:1})]),_:1})]),o("button",{class:"hover:cursor-pointer btn",onClick:O,disabled:n.value},"Apply",8,re)]),s(K,{serverMode:"",data:P.value,columns:[{key:"hourly_log_id",label:"ID",type:"number",sortable:!0,findable:!1},{key:"production_name",label:"Production",type:"string",sortable:!1,findable:!0},{key:"machine_group",label:"Machine Group",type:"string",sortable:!1,findable:!0},{key:"recorded_at",label:"Recorded At",type:"string",sortable:!0,findable:!0},{key:"output_normal",label:"Output (Normal)",type:"number",sortable:!0,findable:!1},{key:"target_normal",label:"Target (Normal)",type:"number",sortable:!0,findable:!1},{key:"output_reject",label:"Output (Reject)",type:"number",sortable:!0,findable:!1},{key:"target_reject",label:"Target (Reject)",type:"number",sortable:!0,findable:!1},{key:"variance_normal",label:"Variance (Normal)",type:"number",sortable:!1,findable:!1}],"per-page":20,"initial-sort":t.meta?.sort??"recorded_at","initial-direction":t.meta?.direction==="asc"?"asc":"desc",loading:n.value,onServerSearch:I,onServerSort:R},null,8,["data","initial-sort","initial-direction","loading"]),o("div",se,[o("button",{class:"hover:cursor-pointer btn",disabled:!t.hourlyLogs?.prev_cursor||n.value,onClick:A},"Previous",8,ne),o("button",{class:"hover:cursor-pointer btn",disabled:!t.hourlyLogs?.next_cursor||n.value,onClick:z},"Next",8,ie)])])]),_:1})],64))}});export{we as default};
