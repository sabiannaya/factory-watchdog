import{d as C,K as w,r as d,w as x,c as k,k as c,u as i,l as y,m as D,a,E as P,t as E,J as m,F as S,o as U}from"./app-DE6ow1Ix.js";import{_ as $}from"./AppLayout.vue_vue_type_script_setup_true_lang-bEXc6-g0.js";import{_ as j,a as B}from"./MachineGroupSelector.vue_vue_type_script_setup_true_lang-E-2JPm3b.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bir4mPS3.js";import"./index-D65DViVt.js";import"./VisuallyHidden-CBitG6WX.js";import"./useForwardExpose-e7sykY-9.js";import"./useForwardPropsEmits-BPFUmVRI.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-CIZlwMSZ.js";import"./search-CWSLdkfT.js";const F={class:"p-4 space-y-4"},G={class:"flex items-center gap-3 pt-4"},M=["disabled"],Q=C({__name:"ProductionCreate",props:{machine_groups:{}},setup(p){const g=[{title:"Data Management",href:"/data-management/production"},{title:"Production",href:"/data-management/production"},{title:"Create",href:window.location.pathname}],f=p,o=w({production_name:"",status:"active",target_date:null,machine_groups:{}}),r=d(null),n=d({}),u=d({});x([r,n],()=>{o.target_date=r.value,o.machine_groups=n.value},{deep:!0});function h(e){n.value=e}function _(e){r.value=e}function v(){u.value={};let e=!0;return Object.values(n.value).forEach(t=>{const s={};(!t.machine_count||t.machine_count<1)&&(s.machine_count=["Machine count must be at least 1"],e=!1),r.value&&(Object.values(t.targets).some(l=>l!=null)||(s.targets=["At least one target is required when target date is set"],e=!1)),Object.keys(s).length>0&&(u.value[t.machine_group_id]=s)}),e}function b(){v()&&o.post("/data-management/production",{preserveState:!1,onSuccess:()=>{m.get("/data-management/production")}})}return(e,t)=>(U(),k(S,null,[c(i(y),{title:"Create Production"}),c($,{breadcrumbs:g},{default:D(()=>[a("div",F,[t[1]||(t[1]=a("div",null,[a("h1",{class:"text-3xl font-bold"},"Create Production"),a("p",{class:"text-muted-foreground dark:text-muted-foreground"}," Create a new production and attach machine groups with targets eee ")],-1)),a("form",{onSubmit:P(b,["prevent"]),class:"space-y-6"},[c(j,{form:i(o)},null,8,["form"]),c(B,{"machine-groups":f.machine_groups||[],"attached-groups":n.value,"target-date":r.value,errors:u.value,"onUpdate:attachedGroups":h,"onUpdate:targetDate":_},null,8,["machine-groups","attached-groups","target-date","errors"]),a("div",G,[a("button",{type:"submit",class:"btn cursor-pointer",disabled:i(o).processing},E(i(o).processing?"Creating...":"Create Production"),9,M),a("button",{type:"button",class:"btn btn-ghost",onClick:t[0]||(t[0]=s=>i(m).get("/data-management/production"))}," Cancel ")])],32)])]),_:1})],64))}});export{Q as default};
