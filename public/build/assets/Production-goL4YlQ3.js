import{d as N,r as b,j as q,J as a,L as A,c as f,k as l,u as i,l as B,m as v,a as n,H as E,M as H,o as g,F as x,q as V,t as j}from"./app-DE6ow1Ix.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-bEXc6-g0.js";import{_ as F}from"./DataTable.vue_vue_type_script_setup_true_lang-Fqdyk_tW.js";import{_,P as I,T as U}from"./IconActionButton.vue_vue_type_script_setup_true_lang-hnPuhNPB.js";import{E as J}from"./eye-cfzP2dOq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bir4mPS3.js";import"./index-D65DViVt.js";import"./VisuallyHidden-CBitG6WX.js";import"./useForwardExpose-e7sykY-9.js";import"./useForwardPropsEmits-BPFUmVRI.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-CIZlwMSZ.js";import"./Input.vue_vue_type_script_setup_true_lang-BVF7sYGf.js";import"./Spinner.vue_vue_type_script_setup_true_lang-DhzhD5qF.js";import"./search-CWSLdkfT.js";const L={class:"p-4 space-y-4"},z={class:"flex items-center justify-between"},G={class:"flex items-center gap-3 mb-2"},K=["disabled"],O={key:1,class:"flex items-center gap-4"},Q={class:"mt-4 flex items-center justify-end gap-2"},R=["disabled"],W=["disabled"],pe=N({__name:"Production",props:{productions:{},meta:{}},setup(y){const h=[{title:"Data Management",href:"/data-management/production"},{title:"Production",href:"/data-management/production"}],k=[{key:"production_id",label:"ID",type:"number",sortable:!0,findable:!1},{key:"production_name",label:"Production Name",type:"string",sortable:!0,findable:!0},{key:"status",label:"Status",type:"string",sortable:!0,findable:!0},{key:"created_at",label:"Created",type:"date",sortable:!0,findable:!0},{key:"actions",label:"Actions",type:"string",sortable:!1,findable:!1}],e=y,S=e.productions?.data??[],c=b(!1),m=b(e.meta?.status??""),C=o=>{const t=e.meta?.per_page??10,r=e.meta?.sort??"production_name",s=e.meta?.direction??"asc";a.get(window.location.pathname,{q:o,per_page:t,sort:r,direction:s},{preserveState:!0,replace:!0})},w=({sort:o,direction:t})=>{const r=e.meta?.per_page??10,s=e.meta?.q??"";o&&a.get(window.location.pathname,{sort:o,direction:t??"asc",per_page:r,q:s},{preserveState:!0,replace:!0})},P=()=>{const o=e.productions?.next_cursor;o&&a.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},D=()=>{const o=e.productions?.prev_cursor;o&&a.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},$=()=>{const o=e.meta?.per_page??10,t=e.meta?.q??"",r=e.meta?.sort??"production_name",s=e.meta?.direction??"asc";a.get(window.location.pathname,{status:m.value||null,q:t,sort:r,direction:s,per_page:o},{preserveState:!0,replace:!0})};let d=null,u=null,p=null;q(()=>{d=()=>c.value=!0,u=()=>c.value=!1,p=()=>c.value=!1,a.on("start",d),a.on("finish",u),a.on("error",p)}),A(()=>{d&&a.on("start",d),u&&a.on("finish",u),p&&a.on("error",p)});const M=o=>{window.confirm("Are you sure you want to delete this production?")&&a.visit(`/data-management/production/${o}`,{method:"delete",preserveState:!1})};return(o,t)=>(g(),f(x,null,[l(i(B),{title:"Production"}),l(T,{breadcrumbs:h},{default:v(()=>[n("div",L,[n("div",z,[t[2]||(t[2]=n("div",null,[n("h2",{class:"text-2xl font-semibold"},"Production"),n("p",{class:"text-sm text-muted-foreground"},"Manage production records")],-1)),n("button",{class:"btn",onClick:t[0]||(t[0]=r=>i(a).get("/data-management/production/create"))}," Create Production ")]),n("div",G,[t[4]||(t[4]=n("label",{class:"text-sm"},"Status",-1)),E(n("select",{class:"appearance-none rounded-md border bg-popover text-popover-foreground px-3 py-2 pr-10 text-sm shadow-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","onUpdate:modelValue":t[1]||(t[1]=r=>m.value=r),onChange:$,disabled:c.value},[...t[3]||(t[3]=[n("option",{value:""},"All",-1),n("option",{value:"active"},"Active",-1),n("option",{value:"inactive"},"Inactive",-1)])],40,K),[[H,m.value]])]),l(F,{serverMode:"",data:i(S),columns:k,"per-page":5,"initial-sort":e.meta?.sort??"production_name","initial-direction":e.meta?.direction==="desc"?"desc":"asc",loading:c.value,onServerSearch:C,onServerSort:w},{cell:v(({row:r,column:s})=>[s.key!=="actions"?(g(),f(x,{key:0},[V(j(r[s.key]),1)],64)):(g(),f("div",O,[l(_,{icon:i(J),label:"Detail",color:"blue",onClick:()=>i(a).get(`/data-management/production/${r.production_id}`)},null,8,["icon","onClick"]),l(_,{icon:i(I),label:"Edit",color:"amber",onClick:()=>i(a).get(`/data-management/production/${r.production_id}/edit`)},null,8,["icon","onClick"]),l(_,{icon:i(U),label:"Delete",color:"red",onClick:()=>M(r.production_id)},null,8,["icon","onClick"])]))]),_:1},8,["data","initial-sort","initial-direction","loading"]),n("div",Q,[n("button",{class:"btn",disabled:!e.productions?.prev_cursor,onClick:D},"Previous",8,R),n("button",{class:"btn",disabled:!e.productions?.next_cursor,onClick:P},"Next",8,W)])])]),_:1})],64))}});export{pe as default};
