import{d as y,K as M,r as G,p as V,m as f,k as h,a as t,u as s,l as C,t as a,E,c as i,b as N,H as m,o as n,n as S,F as v,h as x,I as g,N as U,s as $,q as D,J as T}from"./app-DE6ow1Ix.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-bEXc6-g0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bir4mPS3.js";import"./index-D65DViVt.js";import"./VisuallyHidden-CBitG6WX.js";import"./useForwardExpose-e7sykY-9.js";import"./useForwardPropsEmits-BPFUmVRI.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-CIZlwMSZ.js";const F={class:"p-4 space-y-4"},j={class:"text-muted-foreground dark:text-muted-foreground"},O={class:"rounded-lg border border-sidebar-border/70 dark:border-sidebar-border/70 bg-card dark:bg-card"},z={class:"p-4 border-b border-sidebar-border/40 flex items-start justify-between"},L={class:"text-lg font-semibold mb-1"},q={class:"text-sm text-muted-foreground dark:text-muted-foreground"},A={class:"text-sm text-muted-foreground dark:text-muted-foreground mt-2"},H={class:"p-6"},I={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},J={class:"font-semibold text-base"},K=["onUpdate:modelValue"],P={class:"text-xs text-muted-foreground dark:text-muted-foreground mt-1"},Q=["onUpdate:modelValue"],R=["onUpdate:modelValue"],W={class:"flex items-center gap-3"},X=["disabled"],Y={key:0,class:"rounded-lg bg-destructive/10 dark:bg-destructive/10 border border-destructive/20 dark:border-destructive/20 p-4"},Z={class:"text-sm text-destructive dark:text-destructive space-y-1"},lt=y({__name:"Edit",props:{productionMachineGroup:{},fields:{},values:{},date:{}},setup(r){const _=[{title:"Data Management",href:"/data-management/production"},{title:"Targets",href:"/data-management/targets"},{title:"Edit",href:window.location.pathname}],l=r,d=M({date:l.date,values:l.values}),c=G(!0),k=()=>{d.put(`/data-management/targets/${l.productionMachineGroup.production_machine_group_id}`,{onSuccess:()=>{T.get(`/data-management/targets?production_id=${l.productionMachineGroup.production.production_id}&date=${l.date}`)}})};function w(b){return b.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}return(b,e)=>(n(),V(B,{breadcrumbs:_},{default:f(()=>[h(s(C),{title:"Edit Daily Targets"}),t("div",F,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-3xl font-bold"},"Edit Daily Targets",-1)),t("p",j,a(r.productionMachineGroup.production.production_name)+" • "+a(r.productionMachineGroup.name)+" • "+a(r.date),1)]),t("form",{onSubmit:E(k,["prevent"]),class:"space-y-6"},[t("div",O,[t("div",z,[t("div",null,[t("h2",L,a(r.productionMachineGroup.machineGroup.name),1),t("p",q,a(r.productionMachineGroup.machineGroup.description),1),t("p",A,a(r.productionMachineGroup.machine_count)+" machines ",1)]),t("div",null,[t("button",{type:"button",class:"btn btn-ghost",onClick:e[0]||(e[0]=o=>c.value=!c.value)},[(n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",class:S(["h-4 w-4 transition-transform",{"-rotate-90":!c.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])])]),m(t("div",H,[t("div",I,[(n(!0),i(v,null,x(s(d).values,(o,p)=>(n(),i("div",{key:p,class:"rounded-lg bg-muted/40 dark:bg-muted/40 p-4 space-y-3"},[t("h4",J,a(w(o.field_name)),1),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium mb-1.5"},"Target Value",-1)),m(t("input",{"onUpdate:modelValue":u=>o.target_value=u,type:"number",placeholder:"Enter target",min:"0",class:"input w-full"},null,8,K),[[g,o.target_value,void 0,{number:!0}]]),t("p",P," Default: "+a(r.productionMachineGroup.default_targets[o.field_name]??"None"),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium mb-1.5"},"Actual Output",-1)),m(t("input",{"onUpdate:modelValue":u=>o.actual_value=u,type:"number",placeholder:"Enter actual",min:"0",class:"input w-full"},null,8,Q),[[g,o.actual_value,void 0,{number:!0}]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-1.5"},"Notes",-1)),m(t("textarea",{"onUpdate:modelValue":u=>o.keterangan=u,placeholder:"Optional notes",rows:"2",class:"input w-full resize-none"},null,8,R),[[g,o.keterangan]])])]))),128))])],512),[[U,c.value]])]),t("div",W,[t("button",{type:"submit",disabled:s(d).processing,class:"btn cursor-pointer"},a(s(d).processing?"Saving...":"Save Changes"),9,X),h(s($),{href:`/data-management/targets?production_id=${r.productionMachineGroup.production.production_id}&date=${r.date}`,class:"btn btn-ghost"},{default:f(()=>[...e[6]||(e[6]=[D(" Cancel ",-1)])]),_:1},8,["href"])]),Object.keys(s(d).errors).length>0?(n(),i("div",Y,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-destructive dark:text-destructive mb-2"},"Errors:",-1)),t("ul",Z,[(n(!0),i(v,null,x(s(d).errors,(o,p)=>(n(),i("li",{key:p},"• "+a(o),1))),128))])])):N("",!0)],32)])]),_:1}))}});export{lt as default};
