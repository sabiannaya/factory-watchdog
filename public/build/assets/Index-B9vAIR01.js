import{d as T,r as n,e as q,J as s,c as i,k as f,u as v,l as H,m as N,a as r,H as d,I as h,o as u,F as g,h as x,t as S,L as k}from"./app-ue20rSb4.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_szTgFs.js";import{_ as A}from"./DataTable.vue_vue_type_script_setup_true_lang-UsrF_l4e.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C7b_Quob.js";import"./index-Cl--hQqE.js";import"./VisuallyHidden-DjuZqZTT.js";import"./useForwardExpose-BCEiolqJ.js";import"./useForwardPropsEmits-BgPdB8_u.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-COama0qN.js";import"./Input.vue_vue_type_script_setup_true_lang-DnYWP9Is.js";import"./Spinner.vue_vue_type_script_setup_true_lang-CDXeXNMx.js";import"./search-CIEtGgaw.js";const B={class:"p-4 space-y-4"},j={class:"flex items-center gap-3 mb-3 flex-wrap"},E={class:"flex items-center gap-2"},R=["disabled"],G=["disabled"],J=["value"],O={class:"flex items-center gap-2"},z=["disabled"],K=["disabled"],Q=["value"],W=["disabled"],X={class:"mt-4 flex items-center justify-end gap-2"},Y=["disabled"],Z=["disabled"],me=T({__name:"Index",props:{hourlyLogs:{},meta:{}},setup(w){const L=[{title:"Logs",href:"/logs"},{title:"Hourly Logs",href:"/logs"}],l=n(!1),t=w,p=n(t.meta?.date_from?.split(" ")[0]??""),c=n(t.meta?.date_from?parseInt(t.meta.date_from.split(" ")[1]?.split(":")[0]||"0"):0),m=n(t.meta?.date_to?.split(" ")[0]??""),_=n(t.meta?.date_to?parseInt(t.meta.date_to.split(" ")[1]?.split(":")[0]||"23"):23),P=q(()=>t.hourlyLogs?.data??[]),y=Array.from({length:24},(o,e)=>({value:e,label:`${e.toString().padStart(2,"0")}:00`})),V=o=>{const e=t.meta?.per_page??20,a=t.meta?.sort??"recorded_at",b=t.meta?.direction??"desc";s.get(window.location.pathname,{q:o,per_page:e,sort:a,direction:b,date_from:t.meta?.date_from??null,date_to:t.meta?.date_to??null},{preserveState:!0,replace:!0})},$=({sort:o,direction:e})=>{const a=t.meta?.per_page??20,b=t.meta?.q??"";o&&s.get(window.location.pathname,{sort:o,direction:e??"desc",per_page:a,q:b,date_from:t.meta?.date_from??null,date_to:t.meta?.date_to??null},{preserveState:!0,replace:!0})},D=()=>{const o=t.hourlyLogs?.next_cursor;o&&s.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},F=()=>{const o=t.hourlyLogs?.prev_cursor;o&&s.get(window.location.pathname,{cursor:o},{preserveState:!0,replace:!0})},C=(o,e)=>o?`${o} ${e.toString().padStart(2,"0")}:00:00`:null,I=(o,e)=>o?`${o} ${e.toString().padStart(2,"0")}:59:59`:null,M=()=>{const o=t.meta?.per_page??20,e=t.meta?.sort??"recorded_at",a=t.meta?.direction??"desc";s.get(window.location.pathname,{date_from:C(p.value||null,c.value),date_to:I(m.value||null,_.value),q:t.meta?.q??"",sort:e,direction:a,per_page:o},{preserveState:!0,replace:!0})};return s.on("start",()=>l.value=!0),s.on("finish",()=>l.value=!1),(o,e)=>(u(),i(g,null,[f(v(H),{title:"Hourly Logs"}),f(U,{breadcrumbs:L},{default:N(()=>[r("div",B,[e[6]||(e[6]=r("div",{class:"flex items-center justify-between"},[r("div",null,[r("h2",{class:"text-2xl font-semibold"},"Hourly Production Logs"),r("p",{class:"text-sm text-muted-foreground"},"Real-time hourly output tracking per machine")])],-1)),r("div",j,[r("div",E,[e[4]||(e[4]=r("label",{class:"text-sm font-medium"},"From",-1)),d(r("input",{type:"date",class:"input","onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),disabled:l.value},null,8,R),[[h,p.value]]),d(r("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),class:"input",disabled:l.value},[(u(!0),i(g,null,x(v(y),a=>(u(),i("option",{key:a.value,value:a.value},S(a.label),9,J))),128))],8,G),[[k,c.value,void 0,{number:!0}]])]),r("div",O,[e[5]||(e[5]=r("label",{class:"text-sm font-medium"},"To",-1)),d(r("input",{type:"date",class:"input","onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),disabled:l.value},null,8,z),[[h,m.value]]),d(r("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>_.value=a),class:"input",disabled:l.value},[(u(!0),i(g,null,x(v(y),a=>(u(),i("option",{key:a.value,value:a.value},S(a.label),9,Q))),128))],8,K),[[k,_.value,void 0,{number:!0}]])]),r("button",{class:"btn",onClick:M,disabled:l.value},"Apply",8,W)]),f(A,{serverMode:"",data:P.value,columns:[{key:"hourly_log_id",label:"ID",type:"number",sortable:!0,findable:!1},{key:"production_name",label:"Production",type:"string",sortable:!1,findable:!0},{key:"machine_group",label:"Machine Group",type:"string",sortable:!1,findable:!0},{key:"machine_index",label:"Machine #",type:"number",sortable:!0,findable:!0},{key:"recorded_at",label:"Recorded At",type:"string",sortable:!0,findable:!0},{key:"target_value",label:"Target",type:"number",sortable:!0,findable:!1},{key:"output_value",label:"Output",type:"number",sortable:!0,findable:!1},{key:"variance",label:"Variance",type:"number",sortable:!1,findable:!1}],"per-page":20,"initial-sort":t.meta?.sort??"recorded_at","initial-direction":t.meta?.direction==="asc"?"asc":"desc",loading:l.value,onServerSearch:V,onServerSort:$},null,8,["data","initial-sort","initial-direction","loading"]),r("div",X,[r("button",{class:"btn",disabled:!t.hourlyLogs?.prev_cursor||l.value,onClick:F},"Previous",8,Y),r("button",{class:"btn",disabled:!t.hourlyLogs?.next_cursor||l.value,onClick:D},"Next",8,Z)])])]),_:1})],64))}});export{me as default};
