import{d as B,r as x,e as g,w as b,J as d,c as _,k as u,u as l,l as F,m as k,a as t,q,s as L,H as S,I as U,o as c,F as y,h as I,t as a,L as A,p as Q,b as T,n as G}from"./app-ue20rSb4.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_szTgFs.js";import{_ as v,P as O,T as K}from"./IconActionButton.vue_vue_type_script_setup_true_lang-BtxXR-6U.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-DnYWP9Is.js";import{_ as X}from"./Spinner.vue_vue_type_script_setup_true_lang-CDXeXNMx.js";import{u as Y,_ as Z}from"./ToastNotifications.vue_vue_type_script_setup_true_lang-DFxa9Yfe.js";import{F as w}from"./file-down-B6gKHvru.js";import{c as tt}from"./createLucideIcon-COama0qN.js";import{S as et}from"./search-CIEtGgaw.js";import{E as st}from"./eye-BucQiY86.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C7b_Quob.js";import"./index-Cl--hQqE.js";import"./VisuallyHidden-DjuZqZTT.js";import"./useForwardExpose-BCEiolqJ.js";import"./useForwardPropsEmits-BgPdB8_u.js";import"./index-C4J_hXM0.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=tt("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),lt={class:"p-4"},at={class:"flex items-center justify-between"},nt={class:"flex gap-2"},ut={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},rt=["value"],it={class:"relative"},dt={class:"mt-4"},pt={class:"overflow-x-auto"},ct={class:"w-full table-auto border-collapse"},mt={class:"px-3 py-2 text-sm font-mono"},_t={class:"px-3 py-2 text-sm"},xt={class:"px-3 py-2 text-sm"},ft={class:"px-3 py-2 text-sm font-semibold"},yt={class:"px-3 py-2 text-sm"},vt={class:"px-3 py-2 text-sm"},ht={class:"px-3 py-2 text-sm"},gt={class:"px-3 py-2 text-sm"},bt={class:"px-3 py-2 text-sm"},kt={class:"px-3 py-2 text-sm"},qt={class:"flex items-center gap-4"},St={key:0},It={class:"mt-4 flex items-center justify-end gap-2"},Tt=["disabled"],Ct=["disabled"],Qt=B({__name:"Index",props:{hourlyInputs:{},productions:{},meta:{}},setup(C){const P=[{title:"Input",href:"/input"},{title:"Hourly Input",href:"/input"}],m=x(!1),{toasts:D,dismiss:$}=Y(),n=C,h=g(()=>n.hourlyInputs?.data??[]),j=g(()=>n.productions??[]),r=x(n.meta?.q??""),p=x(n.meta?.date??new Date().toISOString().split("T")[0]),i=x(n.meta?.production_id??"");let f;b([p,i],([o,s])=>{const e=n.meta?.per_page??20;d.get("/input",{date:o,production_id:s||null,q:r.value||null,per_page:e},{preserveState:!0,replace:!0})});const V=()=>{const o=n.meta?.per_page??20;d.get("/input",{q:r.value||null,date:p.value,production_id:i.value||null,per_page:o},{preserveState:!0,replace:!0})};b(r,()=>{f&&clearTimeout(f),f=setTimeout(V,800)});const N=()=>{const o=n.hourlyInputs?.next_cursor;o&&d.get("/input",{cursor:o,date:p.value,production_id:i.value||null,q:r.value||null},{preserveState:!0,replace:!0})},E=()=>{const o=n.hourlyInputs?.prev_cursor;o&&d.get("/input",{cursor:o,date:p.value,production_id:i.value||null,q:r.value||null},{preserveState:!0,replace:!0})},R=o=>d.get(`/input/${o}`),H=o=>d.get(`/input/${o}/edit`),M=o=>{window.confirm("Are you sure you want to delete this hourly input?")&&d.delete(`/input/${o}`,{preserveState:!1})},z=()=>{const o=new URLSearchParams;o.append("date",p.value),i.value&&o.append("production_id",String(i.value)),r.value&&o.append("q",r.value),window.location.href=`/input/export?${o.toString()}`};return d.on("start",()=>m.value=!0),d.on("finish",()=>m.value=!1),(o,s)=>(c(),_(y,null,[u(l(F),{title:"Hourly Input"}),u(Z,{toasts:l(D),onDismiss:l($)},null,8,["toasts","onDismiss"]),u(J,{breadcrumbs:P},{default:k(()=>[t("div",lt,[t("div",at,[s[5]||(s[5]=t("div",null,[t("h2",{class:"text-2xl font-semibold"},"Hourly Input"),t("p",{class:"text-sm text-muted-foreground"},"Record and manage hourly production output")],-1)),t("div",nt,[t("button",{onClick:z,class:"btn-secondary flex items-center gap-2"},[u(l(w),{class:"size-4"}),s[3]||(s[3]=q(" Export to Excel ",-1))]),u(l(L),{href:`/input/create?date=${p.value}&production_id=${i.value||""}`,class:"btn flex items-center gap-2"},{default:k(()=>[u(l(ot),{class:"size-4"}),s[4]||(s[4]=q(" Record Input ",-1))]),_:1},8,["href"])])]),t("div",ut,[t("div",null,[s[6]||(s[6]=t("label",{class:"block text-sm font-medium mb-2"},"Date",-1)),S(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),type:"date",class:"input w-full"},null,512),[[U,p.value]])]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium mb-2"},"Production",-1)),S(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),class:"input w-full"},[s[7]||(s[7]=t("option",{value:""},"All Productions",-1)),(c(!0),_(y,null,I(j.value,e=>(c(),_("option",{key:e.production_id,value:e.production_id},a(e.production_name),9,rt))),128))],512),[[A,i.value]])]),t("div",null,[s[9]||(s[9]=t("label",{class:"block text-sm font-medium mb-2"},"Search",-1)),t("div",it,[u(l(et),{class:"absolute left-2 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),u(l(W),{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value=e),disabled:m.value,type:"search",placeholder:"Search...",class:"pl-8"},null,8,["modelValue","disabled"]),m.value?(c(),Q(l(X),{key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground"})):T("",!0)])])]),t("div",dt,[t("div",pt,[t("table",ct,[s[11]||(s[11]=t("thead",null,[t("tr",{class:"text-left"},[t("th",{class:"px-3 py-2 text-sm font-medium"},"Hour"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Production"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Machine Group"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Total Qty"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Qty Normal"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Qty Reject"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Total Target"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Target Normal"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Target Reject"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Variance"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Actions")])],-1)),t("tbody",null,[(c(!0),_(y,null,I(h.value,e=>(c(),_("tr",{key:e.hourly_log_id,class:"border-t"},[t("td",mt,a(e.hour),1),t("td",_t,a(e.production_name),1),t("td",xt,a(e.machine_group),1),t("td",ft,a((e.output_qty_normal??0)+(e.output_qty_reject??0)),1),t("td",yt,a(e.output_qty_normal!==null?e.output_qty_normal:"-"),1),t("td",vt,a(e.output_qty_reject!==null?e.output_qty_reject:"-"),1),t("td",ht,a((e.target_qty_normal??0)+(e.target_qty_reject??0)),1),t("td",gt,a(e.target_qty_normal!==void 0?e.target_qty_normal:"-"),1),t("td",bt,a(e.target_qty_reject!==void 0?e.target_qty_reject:"-"),1),t("td",{class:G(["px-3 py-2 text-sm",e.total_output-e.total_target>=0?"text-emerald-600":"text-red-600"])},a(e.total_output-e.total_target>=0?"+":"")+a(e.total_output-e.total_target),3),t("td",kt,[t("div",qt,[u(v,{icon:l(st),label:"Detail",color:"blue",onClick:()=>R(e.hourly_log_id)},null,8,["icon","onClick"]),u(v,{icon:l(O),label:"Edit",color:"amber",onClick:()=>H(e.hourly_log_id)},null,8,["icon","onClick"]),u(v,{icon:l(K),label:"Delete",color:"red",onClick:()=>M(e.hourly_log_id)},null,8,["icon","onClick"])])])]))),128)),h.value.length===0?(c(),_("tr",St,[...s[10]||(s[10]=[t("td",{colspan:"11",class:"px-3 py-8 text-center text-sm text-muted-foreground"},' No hourly inputs recorded for this date. Click "Record Input" to add one. ',-1)])])):T("",!0)])])]),t("div",It,[t("button",{class:"btn",disabled:!n.hourlyInputs?.prev_cursor||m.value,onClick:E},"Previous",8,Tt),t("button",{class:"btn",disabled:!n.hourlyInputs?.next_cursor||m.value,onClick:N},"Next",8,Ct)])])])]),_:1})],64))}});export{Qt as default};
