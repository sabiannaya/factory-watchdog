import{d as G,r as x,w as N,J as $,p as M,m as v,k as h,a as t,u as k,l as P,c as a,b as y,s as D,q as g,H as w,o as d,F as b,h as _,t as s,M as C,I as S}from"./app-DE6ow1Ix.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-bEXc6-g0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bir4mPS3.js";import"./index-D65DViVt.js";import"./VisuallyHidden-CBitG6WX.js";import"./useForwardExpose-e7sykY-9.js";import"./useForwardPropsEmits-BPFUmVRI.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-CIZlwMSZ.js";const F={class:"p-4 space-y-4"},j={class:"flex items-center justify-between"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},A=["value"],E={key:0,class:"text-center py-12 rounded-lg border border-dashed border-sidebar-border/70 dark:border-sidebar-border/70 bg-muted/20 dark:bg-muted/20"},I={key:1,class:"space-y-6"},U={class:"flex justify-between items-start mb-6"},q={class:"text-xl font-bold"},H={class:"text-sm text-muted-foreground dark:text-muted-foreground mt-1"},J={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},L={class:"space-y-3"},O={class:"text-sm font-medium mb-1 capitalize"},K={class:"text-sm"},Q={class:"font-semibold"},R={class:"text-xs text-muted-foreground dark:text-muted-foreground mt-1"},W={class:"space-y-3"},X={class:"text-sm font-medium mb-1 capitalize"},Y={class:"text-sm"},Z={class:"font-semibold"},ee={key:0,class:"text-xs text-muted-foreground dark:text-muted-foreground mt-1 italic"},te={key:2,class:"text-center py-12 rounded-lg border border-dashed border-sidebar-border/70 dark:border-sidebar-border/70 bg-muted/20 dark:bg-muted/20"},ce=G({__name:"Target",props:{productions:{},machineGroups:{},selectedProductionId:{},selectedDate:{}},setup(i){const T=[{title:"Data Management",href:"/data-management/production"},{title:"Targets",href:"/data-management/target"}],l=i,u=x(l.selectedProductionId),c=x(l.selectedDate);N([u,c],([n,e])=>{n&&$.get("/data-management/target",{production_id:n,date:e},{preserveState:!0,replace:!0})},{immediate:!1});const m=(n,e,r)=>{const o=l.machineGroups?.find(f=>f.production_machine_group_id===n);if(!o)return null;const p=o.daily_values.find(f=>f.field_name===e);return p?r==="target"?p.target_value:r==="actual"?p.actual_value:p.keterangan:r==="target"?o.default_targets[e]??null:null},V=(n,e)=>l.machineGroups?.find(o=>o.production_machine_group_id===n)?.default_targets[e]??null;return(n,e)=>(d(),M(B,{breadcrumbs:T},{default:v(()=>[h(k(P),{title:"Targets Management"}),t("div",F,[t("div",j,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-3xl font-bold"},"Targets Management"),t("p",{class:"text-muted-foreground dark:text-muted-foreground mt-1"}," View and manage daily targets for production machine groups ")],-1)),h(k(D),{href:"/data-management/targets/create",class:"btn"},{default:v(()=>[...e[2]||(e[2]=[g(" Create Daily Targets ",-1)])]),_:1})]),t("div",z,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-2"},"Select Production",-1)),w(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>u.value=r),class:"input w-full"},[e[4]||(e[4]=t("option",{value:null},"-- Choose Production --",-1)),(d(!0),a(b,null,_(i.productions,r=>(d(),a("option",{key:r.production_id,value:r.production_id},s(r.production_name),9,A))),128))],512),[[C,u.value,void 0,{number:!0}]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium mb-2"},"Select Date",-1)),w(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>c.value=r),type:"date",class:"input w-full"},null,512),[[S,c.value]])])]),u.value?i.machineGroups&&i.machineGroups.length>0?(d(),a("div",I,[(d(!0),a(b,null,_(i.machineGroups,r=>(d(),a("div",{key:r.production_machine_group_id,class:"rounded-lg border border-sidebar-border/70 dark:border-sidebar-border/70 bg-card dark:bg-card p-6"},[t("div",U,[t("div",null,[t("h2",q,s(r.name),1),t("p",H,s(r.machine_count)+" machines ",1)]),h(k(D),{href:`/data-management/targets/${r.production_machine_group_id}/edit?date=${c.value}`,class:"btn btn-ghost"},{default:v(()=>[...e[8]||(e[8]=[g(" Edit ",-1)])]),_:1},8,["href"])]),t("div",J,[t("div",null,[e[10]||(e[10]=t("h3",{class:"font-semibold mb-4 pb-2 border-b-2 border-sky-500 dark:border-sky-600"},"Daily Targets",-1)),t("div",L,[(d(!0),a(b,null,_(r.fields,o=>(d(),a("div",{key:`${r.production_machine_group_id}-target-${o}`,class:"rounded-lg bg-muted/40 dark:bg-muted/40 p-3"},[t("p",O,s(o.replace(/_/g," ")),1),t("p",K,[e[9]||(e[9]=g(" Target: ",-1)),t("span",Q,s(m(r.production_machine_group_id,o,"target")??"Not set"),1)]),t("p",R," Default: "+s(V(r.production_machine_group_id,o)??"No default"),1)]))),128))])]),t("div",null,[e[12]||(e[12]=t("h3",{class:"font-semibold mb-4 pb-2 border-b-2 border-emerald-500 dark:border-emerald-600"},"Actual Output",-1)),t("div",W,[(d(!0),a(b,null,_(r.fields,o=>(d(),a("div",{key:`${r.production_machine_group_id}-actual-${o}`,class:"rounded-lg bg-muted/40 dark:bg-muted/40 p-3"},[t("p",X,s(o.replace(/_/g," ")),1),t("p",Y,[e[11]||(e[11]=g(" Actual: ",-1)),t("span",Z,s(m(r.production_machine_group_id,o,"actual")??"Not recorded"),1)]),m(r.production_machine_group_id,o,"keterangan")?(d(),a("p",ee,s(m(r.production_machine_group_id,o,"keterangan")),1)):y("",!0)]))),128))])])])]))),128))])):u.value&&i.machineGroups?(d(),a("div",te,[...e[13]||(e[13]=[t("p",{class:"text-muted-foreground dark:text-muted-foreground"},"No machine groups found for this production",-1)])])):y("",!0):(d(),a("div",E,[...e[7]||(e[7]=[t("p",{class:"text-muted-foreground dark:text-muted-foreground"},"Please select a production to view machine groups",-1)])]))])]),_:1}))}});export{ce as default};
