import{d as P,f as v,g as I,c as n,m as a,u as s,p as Q,w as i,a as e,t as r,y as A,z as c,b as m,q as p,L as b,o as u,F as g,i as y,e as V,B as j}from"./app-D4NX6RtZ.js";import{a as N,b as G,c as H,d as q,_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNNNqqjX.js";import{u as J}from"./useHourlyInputForm-1ometYFV.js";import{a as W,b as X,c as Y,d as Z,e as tt,f as et,_ as st}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DhxcoGzi.js";import{_ as lt}from"./AlertDialogFooter.vue_vue_type_script_setup_true_lang-CZ3gZmwa.js";import{u as ot}from"./useToast-aH6RW4y0.js";import{C as D}from"./chevron-down-D-IdcPDr.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BzC2dvNG.js";import"./Presence-CsGVf8pY.js";import"./createLucideIcon-A0T1vukc.js";import"./useForwardPropsEmits-BmzqlngZ.js";import"./x-XD7JAbQb.js";import"./VisuallyHidden-BeURpiPp.js";import"./index-C4J_hXM0.js";const ut={class:"p-4 space-y-6"},nt={class:"text-muted-foreground"},rt={class:"rounded-lg border border-sidebar-border/70 bg-card p-6"},at={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dt={key:0,class:"text-red-500 text-sm mt-1"},it={type:"button",class:"input w-full flex items-center justify-between",required:""},pt=["onClick"],mt={key:0,class:"text-red-500 text-sm mt-1"},ft={class:"rounded-lg border border-sidebar-border/70 bg-card p-6"},_t={class:"text-sm text-muted-foreground mb-4"},ct={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={key:0,class:"text-red-500 text-sm mt-1"},gt={key:0,class:"text-red-500 text-sm mt-1"},yt={key:1,class:"space-y-4 mt-4"},vt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},xt={class:"block text-sm font-medium mb-2"},kt=["onUpdate:modelValue"],wt={class:"block text-sm font-medium mb-2"},ht=["onUpdate:modelValue"],Ct={key:2,class:"space-y-4 mt-4"},qt={type:"button",class:"input w-full flex items-center justify-between",required:""},$t=["onClick"],St={class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={key:0},It={class:"flex items-center gap-3"},Vt=["disabled"],jt={class:"mt-4 border-t pt-3"},Nt={class:"rounded-lg bg-muted/50 p-3"},Gt={class:"space-y-1 text-sm"},Ht={key:0},Dt={key:1},Et={key:2},Bt={key:3,class:"grid grid-cols-2 gap-2 mt-1"},Ft={class:"font-medium"},zt={class:"font-medium"},Tt={key:4},Lt={key:5},se=P({__name:"Edit",props:{hourlyInput:{},inputConfig:{},fields:{}},setup(w){const d=w,E=[{title:"Input",href:"/input"},{title:"Edit",href:window.location.pathname}],{form:l,hasChanged:B}=J(d.hourlyInput,d.inputConfig),$=Array.from({length:24},(_,t)=>({value:t,label:`${t.toString().padStart(2,"0")}:00`})),F=v(()=>{const _=Number(l.hour);return $.find(t=>t.value===_)?.label??`${String(_).padStart(2,"0")}:00`}),z=_=>{l.hour=_},x=v(()=>d.inputConfig?.type??"qty_only"),h=v(()=>{const _=x.value;return _==="qty_only"||_==="normal_reject"||d.fields.includes("qty_normal")||d.fields.includes("qty_reject")}),C=v(()=>x.value==="grades"||d.fields.includes("grades")),S=v(()=>x.value==="grade_qty"||d.fields.includes("grade")),{success:T,error:L}=ot(),k=I(!1),U=I(!1),M=()=>{U.value=!0,l.put(`/input/${d.hourlyInput.hourly_log_id}`,{onSuccess:()=>{T("Input updated","Hourly input has been updated"),j.get("/input",{date:l.date})},onError:()=>{L("Failed to update","There was an error updating the input")},onFinish:()=>{U.value=!1,k.value=!1}})},R=()=>{k.value=!0};return(_,t)=>(u(),n(g,null,[a(s(Q),{title:"Edit Hourly Input"}),a(K,{breadcrumbs:E},{default:i(()=>[e("div",ut,[e("div",null,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold"},"Edit Hourly Input",-1)),e("p",nt,r(d.hourlyInput.production_name)+" â€¢ "+r(d.hourlyInput.machine_group),1)]),e("form",{onSubmit:A(R,["prevent"]),class:"space-y-6"},[e("div",rt,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold mb-4"},"Date & Time",-1)),e("div",at,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2"},[p("Date "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s(l).date=o),type:"date",class:"input w-full",required:""},null,512),[[b,s(l).date]]),s(l).errors.date?(u(),n("p",dt,r(s(l).errors.date),1)):m("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium mb-2"},[p("Hour "),e("span",{class:"text-red-500"},"*")],-1)),a(s(N),null,{default:i(()=>[a(s(G),{"as-child":!0},{default:i(()=>[e("button",it,[e("span",null,r(F.value),1),a(s(D),{class:"ml-2 size-4"})])]),_:1}),a(s(H),{class:"w-[var(--radix-dropdown-menu-trigger-width)]"},{default:i(()=>[(u(!0),n(g,null,y(s($),o=>(u(),V(s(q),{"as-child":!0,key:o.value},{default:i(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:f=>z(o.value)},r(o.label),9,pt)]),_:2},1024))),128))]),_:1})]),_:1}),s(l).errors.hour?(u(),n("p",mt,r(s(l).errors.hour),1)):m("",!0)])])]),e("div",ft,[t[19]||(t[19]=e("h2",{class:"text-lg font-semibold mb-4"},"Production Output",-1)),e("p",_t,[t[12]||(t[12]=p(" Input type: ",-1)),e("strong",null,r(x.value),1)]),h.value?(u(),n("div",ct,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium mb-2"},[p("Normal Quantity "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(l).output_qty_normal=o),type:"number",min:"0",class:"input w-full",required:""},null,512),[[b,s(l).output_qty_normal,void 0,{number:!0}]]),s(l).errors.output_qty_normal?(u(),n("p",bt,r(s(l).errors.output_qty_normal),1)):m("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium mb-2"},"Reject Quantity",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s(l).output_qty_reject=o),type:"number",min:"0",class:"input w-full"},null,512),[[b,s(l).output_qty_reject,void 0,{number:!0}]]),s(l).errors.output_qty_reject?(u(),n("p",gt,r(s(l).errors.output_qty_reject),1)):m("",!0)])])):m("",!0),C.value?(u(),n("div",yt,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium mb-2"},"Grades (Multiple)",-1)),e("div",vt,[d.inputConfig?.grade_types&&d.inputConfig.grade_types.length?(u(!0),n(g,{key:0},y(d.inputConfig.grade_types,o=>(u(),n("div",{key:o},[e("label",xt,r(o),1),c(e("input",{"onUpdate:modelValue":f=>s(l).output_grades[o]=f,type:"number",min:"0",class:"input w-full"},null,8,kt),[[b,s(l).output_grades[o],void 0,{number:!0}]])]))),128)):(u(!0),n(g,{key:1},y(s(l).output_grades,(o,f)=>(u(),n("div",{key:f},[e("label",wt,r(f),1),c(e("input",{"onUpdate:modelValue":O=>s(l).output_grades[f]=O,type:"number",min:"0",class:"input w-full"},null,8,ht),[[b,s(l).output_grades[f],void 0,{number:!0}]])]))),128))])])):m("",!0),S.value?(u(),n("div",Ct,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium mb-2"},[p("Grade (Single) "),e("span",{class:"text-red-500"},"*")],-1)),a(s(N),null,{default:i(()=>[a(s(G),{"as-child":!0},{default:i(()=>[e("button",qt,[e("span",null,r(s(l).output_grade??"Select Grade"),1),a(s(D),{class:"ml-2 size-4"})])]),_:1}),a(s(H),{class:"w-[var(--radix-dropdown-menu-trigger-width)]"},{default:i(()=>[a(s(q),{"as-child":!0},{default:i(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:t[3]||(t[3]=o=>s(l).output_grade=null)},"Select Grade")]),_:1}),d.inputConfig?.grade_types?(u(!0),n(g,{key:0},y(d.inputConfig.grade_types,o=>(u(),V(s(q),{key:o,"as-child":!0},{default:i(()=>[e("button",{class:"block w-full text-left px-3 py-2 text-sm",onClick:f=>s(l).output_grade=o},r(o),9,$t)]),_:2},1024))),128)):m("",!0)]),_:1})]),_:1})])])):m("",!0),e("div",St,[w.fields.includes("ukuran")?(u(),n("div",Ut,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium mb-2"},"Ukuran (Size)",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s(l).output_ukuran=o),type:"text",class:"input w-full",placeholder:"e.g., 122x244"},null,512),[[b,s(l).output_ukuran]])])):m("",!0),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium mb-2"},"Notes (Keterangan)",-1)),c(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>s(l).keterangan=o),class:"input w-full",rows:"2",placeholder:"Optional notes..."},null,512),[[b,s(l).keterangan]])])])]),e("div",It,[e("button",{type:"submit",class:"hover:cursor-pointer btn",disabled:s(l).processing||!s(B)},r(s(l).processing?"Saving...":"Update Input"),9,Vt),e("button",{type:"button",class:"hover:cursor-pointer btn btn-ghost",onClick:t[6]||(t[6]=o=>s(j).get("/input"))}," Cancel ")])],32)])]),_:1}),a(st,{open:k.value,"onUpdate:open":t[7]||(t[7]=o=>k.value=o)},{default:i(()=>[a(W,null,{default:i(()=>[a(X,null,{default:i(()=>[a(Y,null,{default:i(()=>[...t[20]||(t[20]=[p("Update Hourly Input?",-1)])]),_:1}),a(Z,null,{default:i(()=>[...t[21]||(t[21]=[p(" This will update the hourly input record. Changes are permanent. ",-1)])]),_:1}),e("div",jt,[t[28]||(t[28]=e("h3",{class:"text-sm font-medium mb-2"},"Preview",-1)),e("div",Nt,[e("div",Gt,[h.value?(u(),n("div",Ht,[t[22]||(t[22]=e("span",{class:"font-medium"},"Normal:",-1)),p(" "+r(s(l).output_qty_normal??0),1)])):m("",!0),h.value?(u(),n("div",Dt,[t[23]||(t[23]=e("span",{class:"font-medium"},"Reject:",-1)),p(" "+r(s(l).output_qty_reject??0),1)])):m("",!0),C.value?(u(),n("div",Et,[...t[24]||(t[24]=[e("span",{class:"font-medium"},"Grades:",-1)])])):m("",!0),C.value?(u(),n("div",Bt,[d.inputConfig?.grade_types&&d.inputConfig.grade_types.length?(u(!0),n(g,{key:0},y(d.inputConfig.grade_types,o=>(u(),n("div",{key:o},[e("span",Ft,r(o)+":",1),p(" "+r(s(l).output_grades[o]??0),1)]))),128)):(u(!0),n(g,{key:1},y(s(l).output_grades,(o,f)=>(u(),n("div",{key:f},[e("span",zt,r(f)+":",1),p(" "+r(o??0),1)]))),128))])):m("",!0),S.value?(u(),n("div",Tt,[t[25]||(t[25]=e("span",{class:"font-medium"},"Grade:",-1)),p(" "+r(s(l).output_grade??"-"),1)])):m("",!0),w.fields.includes("ukuran")?(u(),n("div",Lt,[t[26]||(t[26]=e("span",{class:"font-medium"},"Ukuran:",-1)),p(" "+r(s(l).output_ukuran??"-"),1)])):m("",!0),e("div",null,[t[27]||(t[27]=e("span",{class:"font-medium"},"Notes:",-1)),p(" "+r(s(l).keterangan??"-"),1)])])])])]),_:1}),a(lt,null,{default:i(()=>[a(tt,null,{default:i(()=>[...t[29]||(t[29]=[p("Cancel",-1)])]),_:1}),a(et,{class:"bg-blue-600 hover:bg-blue-700 text-white",onClick:M},{default:i(()=>[...t[30]||(t[30]=[p("Update",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{se as default};
