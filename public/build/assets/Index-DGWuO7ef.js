import{d as S,r as d,e as L,J as l,c as T,k as c,u as P,l as C,m as D,a as r,H as p,I as m,F,o as V}from"./app-ByVm3FOg.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CA8oNPt4.js";import{_ as H}from"./DataTable.vue_vue_type_script_setup_true_lang-Bgb--yl3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C8rHliBE.js";import"./index-CbbRSED3.js";import"./VisuallyHidden-CuZB7xnA.js";import"./useForwardExpose-B_jyS2_j.js";import"./useForwardPropsEmits-DpcW7WWk.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-B5wOFtcm.js";import"./Input.vue_vue_type_script_setup_true_lang-CPkvjD3L.js";import"./Spinner.vue_vue_type_script_setup_true_lang-D3P61CV7.js";import"./search-DCPcnRYA.js";const M={class:"p-4 space-y-4"},N={class:"flex items-center gap-3 mb-3"},$=["disabled"],B=["disabled"],I=["disabled"],j={class:"mt-4 flex items-center justify-end gap-2"},A=["disabled"],E=["disabled"],te=S({__name:"Index",props:{hourlyLogs:{},meta:{}},setup(b){const f=[{title:"Logs",href:"/logs"},{title:"Hourly Logs",href:"/logs"}],s=d(!1),t=b,n=d(t.meta?.date_from??""),i=d(t.meta?.date_to??""),_=L(()=>t.hourlyLogs?.data??[]),g=e=>{const a=t.meta?.per_page??20,o=t.meta?.sort??"recorded_at",u=t.meta?.direction??"desc";l.get(window.location.pathname,{q:e,per_page:a,sort:o,direction:u},{preserveState:!0,replace:!0})},y=({sort:e,direction:a})=>{const o=t.meta?.per_page??20,u=t.meta?.q??"";e&&l.get(window.location.pathname,{sort:e,direction:a??"desc",per_page:o,q:u},{preserveState:!0,replace:!0})},v=()=>{const e=t.hourlyLogs?.next_cursor;e&&l.get(window.location.pathname,{cursor:e},{preserveState:!0,replace:!0})},h=()=>{const e=t.hourlyLogs?.prev_cursor;e&&l.get(window.location.pathname,{cursor:e},{preserveState:!0,replace:!0})},x=e=>e?e.includes("T")?e.replace("T"," ")+":00":`${e} 00:00:00`:null,k=e=>e?e.includes("T")?e.replace("T"," ")+":00":`${e} 23:59:59`:null,w=()=>{const e=t.meta?.per_page??20,a=t.meta?.sort??"recorded_at",o=t.meta?.direction??"desc";l.get(window.location.pathname,{date_from:x(n.value||null),date_to:k(i.value||null),q:t.meta?.q??"",sort:a,direction:o,per_page:e},{preserveState:!0,replace:!0})};return l.on("start",()=>s.value=!0),l.on("finish",()=>s.value=!1),(e,a)=>(V(),T(F,null,[c(P(C),{title:"Hourly Logs"}),c(q,{breadcrumbs:f},{default:D(()=>[r("div",M,[a[4]||(a[4]=r("div",{class:"flex items-center justify-between"},[r("div",null,[r("h2",{class:"text-2xl font-semibold"},"Hourly Production Logs"),r("p",{class:"text-sm text-muted-foreground"},"Real-time hourly output tracking per machine")])],-1)),r("div",N,[a[2]||(a[2]=r("label",{class:"text-sm"},"From",-1)),p(r("input",{type:"datetime-local",class:"input","onUpdate:modelValue":a[0]||(a[0]=o=>n.value=o),disabled:s.value},null,8,$),[[m,n.value]]),a[3]||(a[3]=r("label",{class:"text-sm"},"To",-1)),p(r("input",{type:"datetime-local",class:"input","onUpdate:modelValue":a[1]||(a[1]=o=>i.value=o),disabled:s.value},null,8,B),[[m,i.value]]),r("button",{class:"btn",onClick:w,disabled:s.value},"Apply",8,I)]),c(H,{serverMode:"",data:_.value,columns:[{key:"hourly_log_id",label:"ID",type:"number",sortable:!0,findable:!1},{key:"production_name",label:"Production",type:"string",sortable:!1,findable:!0},{key:"machine_group",label:"Machine Group",type:"string",sortable:!1,findable:!0},{key:"machine_index",label:"Machine #",type:"number",sortable:!0,findable:!0},{key:"recorded_at",label:"Recorded At",type:"string",sortable:!0,findable:!0},{key:"target_value",label:"Target",type:"number",sortable:!0,findable:!1},{key:"output_value",label:"Output",type:"number",sortable:!0,findable:!1},{key:"variance",label:"Variance",type:"number",sortable:!1,findable:!1}],"per-page":20,"initial-sort":t.meta?.sort??"recorded_at","initial-direction":t.meta?.direction==="asc"?"asc":"desc",loading:s.value,onServerSearch:g,onServerSort:y},null,8,["data","initial-sort","initial-direction","loading"]),r("div",j,[r("button",{class:"btn",disabled:!t.hourlyLogs?.prev_cursor||s.value,onClick:h},"Previous",8,A),r("button",{class:"btn",disabled:!t.hourlyLogs?.next_cursor||s.value,onClick:v},"Next",8,E)])])]),_:1})],64))}});export{te as default};
