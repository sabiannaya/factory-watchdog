import{d as R,r as x,e as g,w as b,J as r,c as _,k as u,u as n,l as B,m as k,a as t,s as z,q as A,H as q,I as L,o as p,F as f,h as I,t as l,L as Q,p as U,b as S,n as F}from"./app-ByVm3FOg.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CA8oNPt4.js";import{_ as v,P as J,T as O}from"./IconActionButton.vue_vue_type_script_setup_true_lang-BCAFS0CK.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-CPkvjD3L.js";import{_ as W}from"./Spinner.vue_vue_type_script_setup_true_lang-D3P61CV7.js";import{u as X,_ as Y}from"./ToastNotifications.vue_vue_type_script_setup_true_lang-B7Wo2Xbn.js";import{c as Z}from"./createLucideIcon-B5wOFtcm.js";import{S as w}from"./search-DCPcnRYA.js";import{E as tt}from"./eye-CFT0fCRX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C8rHliBE.js";import"./index-CbbRSED3.js";import"./VisuallyHidden-CuZB7xnA.js";import"./useForwardExpose-B_jyS2_j.js";import"./useForwardPropsEmits-DpcW7WWk.js";import"./index-C4J_hXM0.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Z("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),st={class:"p-4"},ot={class:"flex items-center justify-between"},lt={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},at=["value"],nt={class:"relative"},ut={class:"mt-4"},rt={class:"overflow-x-auto"},it={class:"w-full table-auto border-collapse"},dt={class:"px-3 py-2 text-sm font-mono"},ct={class:"px-3 py-2 text-sm"},pt={class:"px-3 py-2 text-sm"},mt={class:"px-3 py-2 text-sm font-semibold"},_t={class:"px-3 py-2 text-sm"},xt={class:"px-3 py-2 text-sm"},yt={class:"px-3 py-2 text-sm"},ft={class:"px-3 py-2 text-sm"},vt={class:"px-3 py-2 text-sm"},ht={class:"px-3 py-2 text-sm"},gt={class:"flex items-center gap-4"},bt={key:0},kt={class:"mt-4 flex items-center justify-end gap-2"},qt=["disabled"],It=["disabled"],At=R({__name:"Index",props:{hourlyInputs:{},productions:{},meta:{}},setup(T){const C=[{title:"Input",href:"/input"},{title:"Hourly Input",href:"/input"}],m=x(!1),{toasts:P,dismiss:D}=X(),a=T,h=g(()=>a.hourlyInputs?.data??[]),j=g(()=>a.productions??[]),i=x(a.meta?.q??""),d=x(a.meta?.date??new Date().toISOString().split("T")[0]),c=x(a.meta?.production_id??"");let y;b([d,c],([o,s])=>{const e=a.meta?.per_page??20;r.get("/input",{date:o,production_id:s||null,q:i.value||null,per_page:e},{preserveState:!0,replace:!0})});const V=()=>{const o=a.meta?.per_page??20;r.get("/input",{q:i.value||null,date:d.value,production_id:c.value||null,per_page:o},{preserveState:!0,replace:!0})};b(i,()=>{y&&clearTimeout(y),y=setTimeout(V,800)});const $=()=>{const o=a.hourlyInputs?.next_cursor;o&&r.get("/input",{cursor:o,date:d.value,production_id:c.value||null,q:i.value||null},{preserveState:!0,replace:!0})},N=()=>{const o=a.hourlyInputs?.prev_cursor;o&&r.get("/input",{cursor:o,date:d.value,production_id:c.value||null,q:i.value||null},{preserveState:!0,replace:!0})},E=o=>r.get(`/input/${o}`),H=o=>r.get(`/input/${o}/edit`),M=o=>{window.confirm("Are you sure you want to delete this hourly input?")&&r.delete(`/input/${o}`,{preserveState:!1})};return r.on("start",()=>m.value=!0),r.on("finish",()=>m.value=!1),(o,s)=>(p(),_(f,null,[u(n(B),{title:"Hourly Input"}),u(Y,{toasts:n(P),onDismiss:n(D)},null,8,["toasts","onDismiss"]),u(G,{breadcrumbs:C},{default:k(()=>[t("div",st,[t("div",ot,[s[4]||(s[4]=t("div",null,[t("h2",{class:"text-2xl font-semibold"},"Hourly Input"),t("p",{class:"text-sm text-muted-foreground"},"Record and manage hourly production output")],-1)),u(n(z),{href:`/input/create?date=${d.value}&production_id=${c.value||""}`,class:"btn flex items-center gap-2"},{default:k(()=>[u(n(et),{class:"size-4"}),s[3]||(s[3]=A(" Record Input ",-1))]),_:1},8,["href"])]),t("div",lt,[t("div",null,[s[5]||(s[5]=t("label",{class:"block text-sm font-medium mb-2"},"Date",-1)),q(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),type:"date",class:"input w-full"},null,512),[[L,d.value]])]),t("div",null,[s[7]||(s[7]=t("label",{class:"block text-sm font-medium mb-2"},"Production",-1)),q(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),class:"input w-full"},[s[6]||(s[6]=t("option",{value:""},"All Productions",-1)),(p(!0),_(f,null,I(j.value,e=>(p(),_("option",{key:e.production_id,value:e.production_id},l(e.production_name),9,at))),128))],512),[[Q,c.value]])]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium mb-2"},"Search",-1)),t("div",nt,[u(n(w),{class:"absolute left-2 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),u(n(K),{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=e=>i.value=e),disabled:m.value,type:"search",placeholder:"Search...",class:"pl-8"},null,8,["modelValue","disabled"]),m.value?(p(),U(n(W),{key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground"})):S("",!0)])])]),t("div",ut,[t("div",rt,[t("table",it,[s[10]||(s[10]=t("thead",null,[t("tr",{class:"text-left"},[t("th",{class:"px-3 py-2 text-sm font-medium"},"Hour"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Production"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Machine Group"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Total Qty"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Qty Normal"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Qty Reject"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Total Target"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Target Normal"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Target Reject"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Variance"),t("th",{class:"px-3 py-2 text-sm font-medium"},"Actions")])],-1)),t("tbody",null,[(p(!0),_(f,null,I(h.value,e=>(p(),_("tr",{key:e.hourly_log_id,class:"border-t"},[t("td",dt,l(e.hour),1),t("td",ct,l(e.production_name),1),t("td",pt,l(e.machine_group),1),t("td",mt,l((e.output_qty_normal??0)+(e.output_qty_reject??0)),1),t("td",_t,l(e.output_qty_normal!==null?e.output_qty_normal:"-"),1),t("td",xt,l(e.output_qty_reject!==null?e.output_qty_reject:"-"),1),t("td",yt,l((e.target_qty_normal??0)+(e.target_qty_reject??0)),1),t("td",ft,l(e.target_qty_normal!==void 0?e.target_qty_normal:"-"),1),t("td",vt,l(e.target_qty_reject!==void 0?e.target_qty_reject:"-"),1),t("td",{class:F(["px-3 py-2 text-sm",e.total_output-e.total_target>=0?"text-emerald-600":"text-red-600"])},l(e.total_output-e.total_target>=0?"+":"")+l(e.total_output-e.total_target),3),t("td",ht,[t("div",gt,[u(v,{icon:n(tt),label:"Detail",color:"blue",onClick:()=>E(e.hourly_log_id)},null,8,["icon","onClick"]),u(v,{icon:n(J),label:"Edit",color:"amber",onClick:()=>H(e.hourly_log_id)},null,8,["icon","onClick"]),u(v,{icon:n(O),label:"Delete",color:"red",onClick:()=>M(e.hourly_log_id)},null,8,["icon","onClick"])])])]))),128)),h.value.length===0?(p(),_("tr",bt,[...s[9]||(s[9]=[t("td",{colspan:"11",class:"px-3 py-8 text-center text-sm text-muted-foreground"},' No hourly inputs recorded for this date. Click "Record Input" to add one. ',-1)])])):S("",!0)])])]),t("div",kt,[t("button",{class:"btn",disabled:!a.hourlyInputs?.prev_cursor||m.value,onClick:N},"Previous",8,qt),t("button",{class:"btn",disabled:!a.hourlyInputs?.next_cursor||m.value,onClick:$},"Next",8,It)])])])]),_:1})],64))}});export{At as default};
